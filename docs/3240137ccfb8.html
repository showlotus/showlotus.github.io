<!DOCTYPE html><html class="appearance-light" lang="zh-CN"><head><meta charset="UTF-8"><title>v-resizeï¼šç›‘å¬ DOM å°ºå¯¸å˜åŒ–</title><meta name="description" content="I hope one day, everyone is using my program."><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><!-- Google Analytics --><!-- End Google Analytics -->
<!-- Baidu Analytics --><!-- End Baidu Analytics --><link rel="icon" href="/images/favicon.png"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><script src="/js/highlight.pack.js"></script><meta name="description" content="


å‰ä¸¤å¤©ä¸€ä¸ªåŒäº‹é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼šä»å½“å‰å­åº”ç”¨å†åˆ‡æ¢åˆ°å¦ä¸€ä¸ªå­åº”ç”¨ï¼Œç„¶åå†åˆ‡å›æ¥ï¼Œå½“å‰å­åº”ç”¨é‡Œ echarts å›¾è¡¨çš„å®½åº¦å‘ç”Ÿäº†å˜åŒ–ï¼Œæ•´ä½“éƒ½å˜å®½äº†ä¸€äº›ï¼Œè€Œä¸”è¿™ä¸ªé—®é¢˜åªæœ‰åœ¨æµ‹è¯•ç¯å¢ƒä¸‹æ‰æœ‰ï¼Œçº¿ä¸‹å¼€å‘ç¯å¢ƒä¸€åˆ‡æ­£å¸¸ã€‚è¯•äº†è¯•ï¼Œåªè¦è§¦å‘ä¸€æ¬¡ echarts è‡ªå¸¦çš„ resize æ–¹æ³•ï¼Œå°±èƒ½å°†å›¾è¡¨æ ·å¼è°ƒæ•´ä¸ºæ­£å¸¸æ ·å¼äº†ã€‚äºæ˜¯å°±æƒ³åˆ°äº†ï¼Œä¹‹å‰çœ‹è¿‡ä¸€ä¸ª UI åº“å‡ºçš„æŒ‡ä»¤ v-resizeï¼šå½“å‰ DOM å®½é«˜å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè§¦å‘å¯¹åº”çš„æ–¹æ³•ã€‚æœ¬æ¥æ‰“ç®—çœ‹çœ‹å®ƒçš„å®ç°æºç ï¼Œä½†æ˜¯è¿™ä¸ª UI åº“åªæä¾›äº†æ‰“åŒ…åçš„ç‰ˆæœ¬ï¼ˆèŠ±äº†é’±ï¼Œè¿æºç éƒ½çœ‹ä¸åˆ° ğŸ˜‚ï¼‰ï¼Œäºæ˜¯æ‰“ç®—å®ç°ä¸€ä¸ªã€å¹³æ›¿ç‰ˆã€‘ğŸ˜ã€‚



ResizeObserveré‡‡ç”¨ ResizeObserver å»ç›‘å¬ DOM å…ƒç´ çš„å°ºå¯¸å˜åŒ–ï¼Œæµè§ˆå™¨å…¼å®¹æ€§è¿˜å¯ä»¥ï¼ˆé™¤äº† IEï¼‰ã€‚å¦‚ä½•ä½¿ç”¨ï¼ŒMDN ä¸Šæœ‰æ¡ˆä¾‹ï¼ˆæˆ³è¿™.."><meta name="generator" content="Hexo 5.4.2"></head><body class="is-flex is-flex-direction-column"><header class="header-widget is-flex-shrink-0 is-hidden-mobile"><div class="container is-fullhd is-flex is-justify-content-space-between is-align-items-center is-full-height"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">showlotus's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">v-resizeï¼šç›‘å¬ DOM å°ºå¯¸å˜åŒ–</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">ç‚¹å‡»è¿”å›é¡¶éƒ¨</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">é¦–é¡µ</a></h3><h3 class="is-inline-block"><a href="/archives">å½’æ¡£</a></h3></aside></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">é¦–é¡µ</a></h3><h3 class="is-inline-block"><a href="/archives">å½’æ¡£</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#ResizeObserver"><span class="toc-text">ResizeObserver</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0"><span class="toc-text">å®ç°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B4%E4%BD%93%E4%BB%A3%E7%A0%81"><span class="toc-text">æ•´ä½“ä»£ç </span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8-Vue-%E4%B8%AD%E4%BD%BF%E7%94%A8"><span class="toc-text">åœ¨ Vue ä¸­ä½¿ç”¨</span></a></li></ol></div><div class="column is-9"><header class="my-4"><a href="/tags/Vue-%E6%8C%87%E4%BB%A4"><i class="tag post-item-tag">Vue æŒ‡ä»¤</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">v-resizeï¼šç›‘å¬ DOM å°ºå¯¸å˜åŒ–</h1><time class="has-text-grey custom-date-font" datetime="2022-10-17T20:55:26.000Z">2022/10/17 20:55</time><article class="mt-2 post-content"><img src="/3240137ccfb8/banner.jpg" class="">

<blockquote>
<p>å‰ä¸¤å¤©ä¸€ä¸ªåŒäº‹é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼šä»å½“å‰å­åº”ç”¨å†åˆ‡æ¢åˆ°å¦ä¸€ä¸ªå­åº”ç”¨ï¼Œç„¶åå†åˆ‡å›æ¥ï¼Œå½“å‰å­åº”ç”¨é‡Œ <em>echarts</em> å›¾è¡¨çš„å®½åº¦å‘ç”Ÿäº†å˜åŒ–ï¼Œæ•´ä½“éƒ½å˜å®½äº†ä¸€äº›ï¼Œè€Œä¸”è¿™ä¸ªé—®é¢˜åªæœ‰åœ¨æµ‹è¯•ç¯å¢ƒä¸‹æ‰æœ‰ï¼Œçº¿ä¸‹å¼€å‘ç¯å¢ƒä¸€åˆ‡æ­£å¸¸ã€‚è¯•äº†è¯•ï¼Œåªè¦è§¦å‘ä¸€æ¬¡ <em>echarts</em> è‡ªå¸¦çš„ <code>resize</code> æ–¹æ³•ï¼Œå°±èƒ½å°†å›¾è¡¨æ ·å¼è°ƒæ•´ä¸ºæ­£å¸¸æ ·å¼äº†ã€‚äºæ˜¯å°±æƒ³åˆ°äº†ï¼Œä¹‹å‰çœ‹è¿‡ä¸€ä¸ª UI åº“å‡ºçš„æŒ‡ä»¤ <code>v-resize</code>ï¼šå½“å‰ DOM å®½é«˜å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè§¦å‘å¯¹åº”çš„æ–¹æ³•ã€‚æœ¬æ¥æ‰“ç®—çœ‹çœ‹å®ƒçš„å®ç°æºç ï¼Œä½†æ˜¯è¿™ä¸ª UI åº“åªæä¾›äº†æ‰“åŒ…åçš„ç‰ˆæœ¬ï¼ˆèŠ±äº†é’±ï¼Œè¿æºç éƒ½çœ‹ä¸åˆ° ğŸ˜‚ï¼‰ï¼Œäºæ˜¯æ‰“ç®—å®ç°ä¸€ä¸ªã€å¹³æ›¿ç‰ˆã€‘ğŸ˜ã€‚</p>
</blockquote>
<div class="iframe-codepen" src="https://codepen.io/olderk/full/ZEoZpoB" width="100%" height="500"></div>

<h2 id="ResizeObserver"><a href="#ResizeObserver" class="headerlink" title="ResizeObserver"></a>ResizeObserver</h2><p>é‡‡ç”¨ <em>ResizeObserver</em> å»ç›‘å¬ DOM å…ƒç´ çš„å°ºå¯¸å˜åŒ–ï¼Œæµè§ˆå™¨å…¼å®¹æ€§è¿˜å¯ä»¥ï¼ˆé™¤äº† IEï¼‰ã€‚å¦‚ä½•ä½¿ç”¨ï¼ŒMDN ä¸Šæœ‰æ¡ˆä¾‹ï¼ˆ<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/ResizeObserver">æˆ³è¿™é‡Œ</a>ï¼‰ï¼Œè¿™é‡Œå°±ä¸å¤šè¯´äº†ã€‚</p>
<img src="/3240137ccfb8/compatibility.png" class="">

<h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><p>åœ¨ <code>new ResizeObserver(handler)</code> æ—¶ä¼ å…¥çš„å›è°ƒ <code>handler</code> åŒ <code>window.resize</code> ä¸€æ ·ï¼Œåªè¦çª—å£ç¨ç¨æ”¹å˜ä¸€ç‚¹å°±ä¼šé¢‘ç¹è§¦å‘å¤šæ¬¡ï¼Œæ‰€ä»¥éœ€è¦ç»™å®ƒå¤–é¢åŒ…è£¹ä¸€å±‚èŠ‚æµã€‚è¯•äº†è¯•èŠ‚æµæ—¶é—´ä¸º <em>200ms</em> æ—¶æ•ˆæœå°±å¾ˆå¥½ï¼Œå½“ç„¶ä¸ºäº†æ‰©å±•æ€§ï¼Œè¿™ä¸ªèŠ‚æµæ—¶é—´å¯ç”±ç”¨æˆ·è‡ªå®šä¹‰ï¼Œä»¥ <code>v-resize:300=&quot;handler&quot;</code> çš„å½¢å¼ä¼ å…¥ï¼Œå°±æ˜¯è®¾ç½®èŠ‚æµæ—¶é—´ä¸º <em>300ms</em> ã€‚å¦‚æœéœ€è¦ç«‹å³è§¦å‘ï¼Œæ·»åŠ ä¿®é¥°ç¬¦ <code>immediate</code>ï¼Œå³ <code>v-resize.immediate=&quot;handler&quot;</code>ã€‚å…¶ä¸­ <code>handler</code> ä¸ºè§¦å‘çš„å›è°ƒæ–¹æ³•ï¼Œå¿…é¡»æ˜¯ä¸ªå‡½æ•°ã€‚</p>
<h2 id="æ•´ä½“ä»£ç "><a href="#æ•´ä½“ä»£ç " class="headerlink" title="æ•´ä½“ä»£ç "></a>æ•´ä½“ä»£ç </h2><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// directives/resize.js</span>
<span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> wait <span class="token operator">=</span> <span class="token number">200</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span>
  <span class="token keyword">let</span> isFirstTime <span class="token operator">=</span> <span class="token boolean">true</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">const</span> args <span class="token operator">=</span> arguments
    <span class="token keyword">const</span> that <span class="token operator">=</span> <span class="token keyword">this</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>isFirstTime<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>that<span class="token punctuation">,</span> args<span class="token punctuation">)</span>
      isFirstTime <span class="token operator">=</span> <span class="token boolean">false</span>
      <span class="token keyword">return</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token keyword">return</span>

    timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
      <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span>
      timer <span class="token operator">=</span> <span class="token keyword">null</span>
      <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>that<span class="token punctuation">,</span> args<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> wait<span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">const</span> <span class="token function-variable function">noop</span> <span class="token operator">=</span> <span class="token parameter">v</span> <span class="token operator">=></span> v

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
  <span class="token function">bind</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding<span class="token punctuation">,</span> vnode</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">let</span> wait <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>binding<span class="token punctuation">.</span>arg<span class="token punctuation">)</span>
    <span class="token keyword">let</span> immediate <span class="token operator">=</span> binding<span class="token punctuation">.</span>modifiers<span class="token punctuation">.</span>immediate <span class="token operator">||</span> <span class="token boolean">false</span>
    wait <span class="token operator">=</span> Number<span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span>wait<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token keyword">undefined</span> <span class="token operator">:</span> wait
    <span class="token keyword">const</span> callback <span class="token operator">=</span> binding<span class="token punctuation">.</span>value <span class="token operator">||</span> noop
    <span class="token keyword">const</span> handler <span class="token operator">=</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">entries</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token comment">// æ˜¯å¦ç«‹å³è§¦å‘</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>immediate<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        immediate <span class="token operator">=</span> <span class="token boolean">true</span>
        <span class="token keyword">return</span>
      <span class="token punctuation">&#125;</span>
      <span class="token keyword">const</span> rect <span class="token operator">=</span> entries<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>contentRect
      <span class="token comment">// å°†å½“å‰ DOM çš„ä¿¡æ¯è¿”å›</span>
      <span class="token function">callback</span><span class="token punctuation">(</span>rect<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> wait<span class="token punctuation">)</span>
    el<span class="token punctuation">.</span>_observe <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ResizeObserver</span><span class="token punctuation">(</span>handler<span class="token punctuation">)</span>
    el<span class="token punctuation">.</span>_observe<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token function">unbind</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding<span class="token punctuation">,</span> vnode</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    el<span class="token punctuation">.</span>_observe<span class="token punctuation">.</span><span class="token function">unobserve</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span>
    <span class="token keyword">delete</span> el<span class="token punctuation">.</span>_observe
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h2 id="åœ¨-Vue-ä¸­ä½¿ç”¨"><a href="#åœ¨-Vue-ä¸­ä½¿ç”¨" class="headerlink" title="åœ¨ Vue ä¸­ä½¿ç”¨"></a>åœ¨ Vue ä¸­ä½¿ç”¨</h2><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">></span>
  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"wrap"</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>div v<span class="token operator">-</span>resize<span class="token operator">=</span><span class="token string">"handleResizeLeft"</span><span class="token operator">></span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> leftWidth <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span>
<span class="token operator">&lt;</span>script<span class="token operator">></span>
<span class="token keyword">import</span> resize <span class="token keyword">from</span> <span class="token string">'./directives/resize'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
  <span class="token literal-property property">directives</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> resize <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
      <span class="token literal-property property">leftWidth</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token function">handleResizeLeft</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span> width <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>leftWidth <span class="token operator">=</span> width
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><a class="button is-default" href="/9cc2e610b92e.html" title="Vueï¼šbeforeCreate -&gt; created &lt;W8&gt;"><i class="iconfont icon-prev mr-2 has-text-grey"></i><span class="has-text-weight-semibold">ä¸Šä¸€é¡µ: Vueï¼šbeforeCreate -&gt; created &lt;W8&gt;</span></a><a class="button is-default" href="/e8d67c6bb4f7.html" title="ivu-input-number-union &lt;W7&gt;"><span class="has-text-weight-semibold">ä¸‹ä¸€é¡µ: ivu-input-number-union &lt;W7&gt;</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section><article class="mt-6 comment-container"><script async repo="showlotus/showlotus" src="https://utteranc.es/client.js" issue-term="pathname" theme="preferred-color-scheme"></script></article></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><!-- TODO é…ç½®ä¸ªäººç½‘ç«™é“¾æ¥--><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/showlotus"><i class="iconfont icon-github"></i></a><!-- Gitee--><!-- Ins--><!-- RSS--><!-- çŸ¥ä¹--><!-- é¢†è‹±--><!-- è„¸ä¹¦--></section><p><span>Copyright Â©</span><span> showlotus 2026</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"></div><div><span></span></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/post.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@2.1.4/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js"></script><script src="/js/clipboard_use.js"></script><script src="/js/codepen.io.js"></script></body></html>
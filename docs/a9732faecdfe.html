<!DOCTYPE html><html class="appearance-light" lang="zh-CN"><head><meta charset="UTF-8"><title>æ‹¦æˆªç½‘é¡µè¯·æ±‚å¹¶å¤„ç†æ•°æ® &lt;W12&gt;</title><meta name="description" content="I hope one day, everyone is using my program."><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><!-- Google Analytics --><!-- End Google Analytics -->
<!-- Baidu Analytics --><!-- End Baidu Analytics --><link rel="icon" href="/images/favicon.png"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><script src="/js/highlight.pack.js"></script><meta name="description" content="


æœ‰æ—¶å€™éœ€è¦æ‹¦æˆªç½‘é¡µçš„æŸä¸ªè¯·æ±‚ï¼Œæ”¶é›†å“åº”æ•°æ®ï¼Œå•ä¸ªè¯·æ±‚ç›´æ¥æ“ä½œå°±å¥½äº†ï¼›å¦‚æœæ˜¯å¤šä¸ªç›¸åŒ API çš„è¯·æ±‚ï¼Œå¦‚æœæœ‰ä¸ªæ‰¹å¤„ç†æ•°æ®çš„å·¥å…·å²‚ä¸ç¾å“‰ã€‚äºæ˜¯ï¼Œå®ƒæ¥äº†ã€‚æœ¬æ¥æ‰“ç®—å¼„æˆä¸€ä¸ªæ²¹çŒ´æ’ä»¶ï¼Œä½†æ˜¯æµè§ˆå™¨æ€»æ˜¯ä¼šæŠŠæ’ä»¶çš„æ‰“å°æ—¥å¿—ç»™ â€œåæ‰â€ï¼Œé‚£å°±å…ˆç›´æ¥åœ¨æ§åˆ¶å°è¿è¡Œè„šæœ¬ï¼Œæ›´ç®€å•æ˜äº†ã€‚

ä»‹ç»ç”¨åˆ°äº†ä¸€ä¸ªæ’ä»¶ ajaxhookï¼Œå®˜æ–¹æ˜¯è¿™æ ·ä»‹ç»çš„ï¼š
åœ¨ XMLHttpRequest å¯¹è±¡å‘èµ·è¯·æ±‚ä¹‹å‰ã€æ”¶åˆ°å“åº”å†…å®¹ä¹‹åä»¥åŠå‘ç”Ÿé”™è¯¯æ—¶è·å¾—å¤„ç†æƒï¼Œé€šè¿‡å®ƒä½ å¯ä»¥æå‰å¯¹è¯·æ±‚ã€å“åº”ä»¥åŠé”™è¯¯è¿›è¡Œä¸€äº›é¢„å¤„ç†ã€‚


è¦æƒ³åœ¨ç½‘ç«™ä¸Šç”¨å…¶ä»–çš„è„šæœ¬ï¼Œé¦–å…ˆéœ€è¦å°†å®ƒå¼•å…¥ï¼Œè¿™é‡Œæ˜¯é€šè¿‡åŠ¨æ€åˆ›å»º script æ ‡ç­¾çš„æ–¹å¼ï¼Œå°†è¿™ä¸ªæ ‡ç­¾æ’å…¥åˆ°å½“å‰é¡µé¢ä¸­ï¼Œç„¶åæµè§ˆå™¨ä¼šè‡ªåŠ¨è·å–è¿™ä¸ª JS èµ„æºã€‚
const script = document.createElement(&quot;.."><meta name="generator" content="Hexo 5.4.2"></head><body class="is-flex is-flex-direction-column"><header class="header-widget is-flex-shrink-0 is-hidden-mobile"><div class="container is-fullhd is-flex is-justify-content-space-between is-align-items-center is-full-height"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">showlotus's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">æ‹¦æˆªç½‘é¡µè¯·æ±‚å¹¶å¤„ç†æ•°æ® &lt;W12&gt;</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">ç‚¹å‡»è¿”å›é¡¶éƒ¨</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">é¦–é¡µ</a></h3><h3 class="is-inline-block"><a href="/archives">å½’æ¡£</a></h3></aside></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">é¦–é¡µ</a></h3><h3 class="is-inline-block"><a href="/archives">å½’æ¡£</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D"><span class="toc-text">ä»‹ç»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%84%9A%E6%9C%AC"><span class="toc-text">è„šæœ¬</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B"><span class="toc-text">ç¤ºä¾‹</span></a></li></ol></div><div class="column is-9"><header class="my-4"><a href="/tags/JavaScript"><i class="tag post-item-tag">JavaScript</i></a><a href="/tags/%E6%B5%8F%E8%A7%88%E5%99%A8%E8%84%9A%E6%9C%AC"><i class="tag post-item-tag">æµè§ˆå™¨è„šæœ¬</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">æ‹¦æˆªç½‘é¡µè¯·æ±‚å¹¶å¤„ç†æ•°æ® &lt;W12&gt;</h1><time class="has-text-grey custom-date-font" datetime="2022-11-20T15:07:56.000Z">2022/11/20 15:07</time><article class="mt-2 post-content"><img src="/a9732faecdfe/banner.jpg" class="">

<blockquote>
<p>æœ‰æ—¶å€™éœ€è¦æ‹¦æˆªç½‘é¡µçš„æŸä¸ªè¯·æ±‚ï¼Œæ”¶é›†å“åº”æ•°æ®ï¼Œå•ä¸ªè¯·æ±‚ç›´æ¥æ“ä½œå°±å¥½äº†ï¼›å¦‚æœæ˜¯å¤šä¸ªç›¸åŒ API çš„è¯·æ±‚ï¼Œå¦‚æœæœ‰ä¸ªæ‰¹å¤„ç†æ•°æ®çš„å·¥å…·å²‚ä¸ç¾å“‰ã€‚äºæ˜¯ï¼Œå®ƒæ¥äº†ã€‚æœ¬æ¥æ‰“ç®—å¼„æˆä¸€ä¸ªæ²¹çŒ´æ’ä»¶ï¼Œä½†æ˜¯æµè§ˆå™¨æ€»æ˜¯ä¼šæŠŠæ’ä»¶çš„æ‰“å°æ—¥å¿—ç»™ â€œåæ‰â€ï¼Œé‚£å°±å…ˆç›´æ¥åœ¨æ§åˆ¶å°è¿è¡Œè„šæœ¬ï¼Œæ›´ç®€å•æ˜äº†ã€‚</p>
</blockquote>
<h4 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h4><p>ç”¨åˆ°äº†ä¸€ä¸ªæ’ä»¶ <a target="_blank" rel="noopener" href="https://github.com/wendux/ajax-hook">ajaxhook</a>ï¼Œå®˜æ–¹æ˜¯è¿™æ ·ä»‹ç»çš„ï¼š</p>
<blockquote><p>åœ¨ <code>XMLHttpRequest</code> å¯¹è±¡å‘èµ·è¯·æ±‚ä¹‹å‰ã€æ”¶åˆ°å“åº”å†…å®¹ä¹‹åä»¥åŠå‘ç”Ÿé”™è¯¯æ—¶è·å¾—å¤„ç†æƒï¼Œé€šè¿‡å®ƒä½ å¯ä»¥æå‰å¯¹è¯·æ±‚ã€å“åº”ä»¥åŠé”™è¯¯è¿›è¡Œä¸€äº›é¢„å¤„ç†ã€‚</p>
</blockquote>

<p>è¦æƒ³åœ¨ç½‘ç«™ä¸Šç”¨å…¶ä»–çš„è„šæœ¬ï¼Œé¦–å…ˆéœ€è¦å°†å®ƒå¼•å…¥ï¼Œè¿™é‡Œæ˜¯é€šè¿‡åŠ¨æ€åˆ›å»º <code>script</code> æ ‡ç­¾çš„æ–¹å¼ï¼Œå°†è¿™ä¸ªæ ‡ç­¾æ’å…¥åˆ°å½“å‰é¡µé¢ä¸­ï¼Œç„¶åæµè§ˆå™¨ä¼šè‡ªåŠ¨è·å–è¿™ä¸ª <code>JS</code> èµ„æºã€‚</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"script"</span><span class="token punctuation">)</span>
script<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"type"</span><span class="token punctuation">,</span> <span class="token string">"text/javascript"</span><span class="token punctuation">)</span>
script<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>
  <span class="token string">"src"</span><span class="token punctuation">,</span>
  <span class="token string">"https://unpkg.com/ajax-hook@2.1.3/dist/ajaxhook.min.js"</span>
<span class="token punctuation">)</span>
document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span></code></pre>

<p>åˆ›å»ºå®Œæ ‡ç­¾è¿˜ä¸è¡Œï¼Œè¿˜è¦æ£€æµ‹å½“å‰æ˜¯å¦å·²ç»å¼•å…¥å®Œæˆäº†ã€‚å¼•å…¥å®Œæˆåï¼Œ<code>ajaxhook</code> ä¼šåœ¨å…¨å±€å®šä¹‰ä¸€ä¸ªåå« <code>ah</code> çš„å˜é‡ï¼Œé‚£ä¹ˆå°±å¯ä»¥æ ¹æ®è¿™ä¸ªå˜é‡æ¥åˆ¤æ–­ã€‚</p>
<p>é€šè¿‡åœ¨ä¸€ä¸ª <code>Promise</code> å®ä¾‹é‡Œï¼Œå®šæ—¶æ£€æµ‹æ˜¯å¦ <code>ah !== undefined</code> æ¥åˆ¤æ–­ã€‚è™½ç„¶çœ‹èµ·æ¥å¾ˆç¬¨æ‹™ï¼Œä½†æ˜¯å¾ˆå®ç”¨ ğŸ¤­ã€‚</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> ajaxHookTimer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>ah <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token function">clearInterval</span><span class="token punctuation">(</span>ajaxHookTimer<span class="token punctuation">)</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token function">reject</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></code></pre>

<p>è„šæœ¬å…¶ä½™éƒ¨åˆ†éƒ½æ˜¯æŒ‰ç…§å®˜ç½‘æ¡ˆä¾‹ï¼Œå¯ä»¥è‡ªè¡ŒæŸ¥é˜…ã€‚</p>
<h4 id="è„šæœ¬"><a href="#è„šæœ¬" class="headerlink" title="è„šæœ¬"></a>è„šæœ¬</h4><p>å®Œæ•´çš„è„šæœ¬ä»£ç å¦‚ä¸‹ï¼š</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token comment">/* --- æ”¶é›†æ•°æ® Start --- */</span>

  <span class="token comment">// ç”¨æ¥æ”¶é›†æ•°æ®çš„æ•°ç»„å¯¹è±¡</span>
  <span class="token keyword">const</span> resData <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

  <span class="token comment">// éœ€è¦æ‹¦æˆªçš„è¯·æ±‚åœ°å€</span>
  <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token string">""</span>

  <span class="token comment">// è‡ªå®šä¹‰çš„æ•°æ®æ ¼å¼åŒ–æ–¹æ³•</span>
  <span class="token keyword">function</span> <span class="token function">formatData</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">/* å¤„ç† data */</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>resData<span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span>

  <span class="token comment">/* --- æ”¶é›†æ•°æ® End --- */</span>

  <span class="token function">injectAjaxHook</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"å¼€å¯æ‹¦æˆª"</span><span class="token punctuation">)</span>
    <span class="token function">openIntercept</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

  <span class="token comment">// æ³¨å…¥ç¬¬ä¸‰æ–¹æ’ä»¶</span>
  <span class="token keyword">function</span> <span class="token function">injectAjaxHook</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"æ‹¦æˆªå‡†å¤‡ä¸­..."</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"script"</span><span class="token punctuation">)</span>
    script<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"type"</span><span class="token punctuation">,</span> <span class="token string">"text/javascript"</span><span class="token punctuation">)</span>
    script<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>
      <span class="token string">"src"</span><span class="token punctuation">,</span>
      <span class="token string">"https://unpkg.com/ajax-hook@2.1.3/dist/ajaxhook.min.js"</span>
    <span class="token punctuation">)</span>
    document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">var</span> ajaxHookTimer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>ah <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token function">clearInterval</span><span class="token punctuation">(</span>ajaxHookTimer<span class="token punctuation">)</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span>
      <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token function">reject</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span>

  <span class="token comment">// å¼€å¯æ•°æ®æ‹¦æˆª</span>
  <span class="token keyword">function</span> <span class="token function">openIntercept</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    ah<span class="token punctuation">.</span><span class="token function">proxy</span><span class="token punctuation">(</span>
      <span class="token punctuation">&#123;</span>
        <span class="token comment">// è¯·æ±‚å‘èµ·å‰è¿›å…¥</span>
        <span class="token function-variable function">onRequest</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">config<span class="token punctuation">,</span> handler</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
          handler<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token comment">// è¯·æ±‚å‘ç”Ÿé”™è¯¯æ—¶è¿›å…¥ï¼Œæ¯”å¦‚è¶…æ—¶ï¼›æ³¨æ„ï¼Œä¸åŒ…æ‹¬httpçŠ¶æ€ç é”™è¯¯ï¼Œå¦‚404ä»ç„¶ä¼šè®¤ä¸ºè¯·æ±‚æˆåŠŸ</span>
        <span class="token function-variable function">onError</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> handler</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>type<span class="token punctuation">)</span>
          handler<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token comment">// è¯·æ±‚æˆåŠŸåè¿›å…¥</span>
        <span class="token function-variable function">onResponse</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">res<span class="token punctuation">,</span> handler</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
          <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">const</span> url <span class="token operator">=</span> res<span class="token punctuation">.</span>config<span class="token punctuation">.</span>url
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isUsefulUrl</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
              <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>response<span class="token punctuation">)</span>
              <span class="token function">formatData</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span>
            handler<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
          <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
          <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      window
    <span class="token punctuation">)</span>

    <span class="token comment">// æ˜¯å¦æ˜¯æœ‰æ•ˆé“¾æ¥</span>
    <span class="token keyword">function</span> <span class="token function">isUsefulUrl</span><span class="token punctuation">(</span><span class="token parameter">testUrl</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">let</span> path <span class="token operator">=</span> testUrl<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(\.\w+)?(\/\w+)+(?=(\?|$))</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>path<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        path <span class="token operator">=</span> path<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
      <span class="token punctuation">&#125;</span>
      <span class="token keyword">return</span> testUrl<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">||</span> url<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token operator">-</span><span class="token number">1</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>

<h4 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h4><p>ä»¥ç™¾åº¦å›¾ç‰‡æœç´¢ä¸ºä¾‹ï¼Œæ¯æ¬¡åˆ‡æ¢å›¾ç‰‡æ—¶ï¼Œä¼šå‘èµ·è¿™ä¸ªè¯·æ±‚ã€‚</p>
<img src="/a9732faecdfe/2.png" class="">

<p>å‡å¦‚éœ€è¦æ”¶é›†å“åº”æ•°æ®ä¸­çš„ <code>bfe_log_id</code> å­—æ®µã€‚</p>
<img src="/a9732faecdfe/1.png" class="">

<p>é‚£ä¹ˆåœ¨æ”¶é›†æ•°æ®éƒ¨åˆ†å°±å¯ä»¥å†™æˆä¸‹é¢è¿™æ ·ï¼š</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/* --- æ”¶é›†æ•°æ® Start --- */</span>

<span class="token comment">// ç”¨æ¥æ”¶é›†æ•°æ®çš„æ•°ç»„å¯¹è±¡</span>
<span class="token keyword">const</span> resData <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token comment">// éœ€è¦æ‹¦æˆªçš„è¯·æ±‚åœ°å€</span>
<span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token string">"https://image.baidu.com/simple/simplesearch"</span>

<span class="token comment">// è‡ªå®šä¹‰çš„æ•°æ®æ ¼å¼åŒ–æ–¹æ³•</span>
<span class="token keyword">function</span> <span class="token function">formatData</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  resData<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>bfe_log_id<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>resData<span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">/* --- æ”¶é›†æ•°æ® End --- */</span></code></pre>

<p>æ‰“å¼€æ§åˆ¶å°ï¼Œç²˜è´´è„šæœ¬ä»£ç ï¼Œå›è½¦ã€‚å½“æ§åˆ¶å°å‡ºç°ã€å¼€å¯æ‹¦æˆªã€‘æ—¶ï¼Œè¯´æ˜æ‹¦æˆªå™¨å·²ç»åŠ è½½å®Œæ¯•ï¼Œå°±å¯ä»¥å‘è¯·æ±‚äº†ã€‚</p>
<img src="/a9732faecdfe/result.gif" class="">

<p>å¤§åŠŸå‘Šæˆï¼Œå¿«å»è¯•è¯•å§ã€‚</p>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><a class="button is-default" href="/5a84071bd45a.html" title="Vue ä¸­å¦‚ä½•å–æ¶ˆ ViewDesign ä¸­ç»„ä»¶å†…éƒ¨çš„æŒ‡ä»¤ &lt;W13&gt;"><i class="iconfont icon-prev mr-2 has-text-grey"></i><span class="has-text-weight-semibold">ä¸Šä¸€é¡µ: Vue ä¸­å¦‚ä½•å–æ¶ˆ ViewDesign ä¸­ç»„ä»¶å†…éƒ¨çš„æŒ‡ä»¤ &lt;W13&gt;</span></a><a class="button is-default" href="/e7cef8a1b722.html" title="CSSå®ç°æ›²çº¿å¯¼èˆªèœå• &lt;W11&gt;"><span class="has-text-weight-semibold">ä¸‹ä¸€é¡µ: CSSå®ç°æ›²çº¿å¯¼èˆªèœå• &lt;W11&gt;</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section><article class="mt-6 comment-container"><script async repo="showlotus/showlotus" src="https://utteranc.es/client.js" issue-term="pathname" theme="preferred-color-scheme"></script></article></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><!-- TODO é…ç½®ä¸ªäººç½‘ç«™é“¾æ¥--><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/showlotus"><i class="iconfont icon-github"></i></a><!-- Gitee--><!-- Ins--><!-- RSS--><!-- çŸ¥ä¹--><!-- é¢†è‹±--><!-- è„¸ä¹¦--></section><p><span>Copyright Â©</span><span> showlotus 2026</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"></div><div><span></span></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/post.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@2.1.4/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js"></script><script src="/js/clipboard_use.js"></script><script src="/js/codepen.io.js"></script></body></html>
<!DOCTYPE html><html class="appearance-light" lang="zh-CN"><head><meta charset="UTF-8"><title>手写一个流程图组件，就叫「flow-chart·1.0」吧</title><meta name="description" content="I hope one day, everyone is using my program."><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><!-- Google Analytics --><!-- End Google Analytics -->
<!-- Baidu Analytics --><!-- End Baidu Analytics --><link rel="icon" href="/images/favicon.png"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><script src="/js/highlight.pack.js"></script><meta name="description" content="
效果图

缺点
只适用于相邻两个阶段之间，只能有一个 “ 两个及以上 ”的流程，先看图说话。


step2 里有两个步骤，step3 也有两个步骤，就会导致如上图所示的情况（这也是这个组件暂时没考虑的地方，等后续再优化一下），除了这种情况，其他的展示效果还是蛮好的。





边框线条宽度这块，有时候虽然设置的是一样的值，但是显示时，不是这个高点，就是那个宽点，为了展示出来美观些，我也是做了一些改动。


代码template&amp;lt;template&gt;
  &amp;lt;div
    class=&quot;fc-wrap&quot;
    :style=&quot;&amp;#123;
      '--fc-default-color': color,
      '--fc-active-color': activeColor,
   .."><meta name="generator" content="Hexo 5.4.2"></head><body class="is-flex is-flex-direction-column"><header class="header-widget is-flex-shrink-0 is-hidden-mobile"><div class="container is-fullhd is-flex is-justify-content-space-between is-align-items-center is-full-height"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">showlotus's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">手写一个流程图组件，就叫「flow-chart·1.0」吧</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">点击返回顶部</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">首页</a></h3><h3 class="is-inline-block"><a href="/archives">归档</a></h3><h3 class="is-inline-block"><a href="/about">关于</a></h3></aside></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">首页</a></h3><h3 class="is-inline-block"><a href="/archives">归档</a></h3><h3 class="is-inline-block"><a href="/about">关于</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%88%E6%9E%9C%E5%9B%BE"><span class="toc-text">效果图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-text"></span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%BA%E7%82%B9"><span class="toc-text">缺点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#-1"><span class="toc-text"></span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#-2"><span class="toc-text"></span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#-3"><span class="toc-text"></span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81"><span class="toc-text">代码</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#template"><span class="toc-text">template</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#script"><span class="toc-text">script</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#style"><span class="toc-text">style</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF"><span class="toc-text">实现思路</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#-4"><span class="toc-text"></span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#-5"><span class="toc-text"></span></a></li></ol></div><div class="column is-9"><header class="my-4"><a href="/tags/Vue"><i class="tag post-item-tag">Vue</i></a><a href="/tags/%E6%89%8B%E5%86%99%E7%BB%84%E4%BB%B6"><i class="tag post-item-tag">手写组件</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">手写一个流程图组件，就叫「flow-chart·1.0」吧</h1><time class="has-text-grey custom-date-font" datetime="2021-10-31T11:24:53.000Z">2021/10/31 11:24</time><article class="mt-2 post-content"><p><img src="https://cn.bing.com/th?id=OHR.YorkMinster_ZH-CN3129176050_1920x1080.jpg&rf=LaDigue_1920x1080.jpg&pid=hp%7D" alt="约克大教堂墙上的怪诞雕塑，英格兰北约克郡"></p>
<h4 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a><center>效果图</center></h4><img src="/98d80ddf0bcb/10.31.gif" class="">

<h4 id=""><a href="#" class="headerlink" title=""></a></h4><h4 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a><center>缺点</center></h4><ul>
<li><p>只适用于相邻两个阶段之间，只能<code>有一个 “ 两个及以上 ”</code>的流程，先看图说话。</p>
<img src="/98d80ddf0bcb/10.31-1.gif" class="">

<h4 id="-1"><a href="#-1" class="headerlink" title=""></a></h4><p>step2 里有两个步骤，step3 也有两个步骤，就会导致如上图所示的情况（这也是这个组件暂时没考虑的地方，等后续再优化一下），除了这种情况，其他的展示效果还是蛮好的。</p>
<img src="/98d80ddf0bcb/10.31-2.gif" class="">

<h4 id="-2"><a href="#-2" class="headerlink" title=""></a></h4><img src="/98d80ddf0bcb/10.31-3.gif" class="">

<h4 id="-3"><a href="#-3" class="headerlink" title=""></a></h4></li>
<li><p>边框线条宽度这块，有时候虽然设置的是一样的值，但是显示时，不是这个高点，就是那个宽点，为了展示出来美观些，我也是做了一些改动。</p>
</li>
</ul>
<h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a><center>代码</center></h4><h5 id="template"><a href="#template" class="headerlink" title="template"></a><p>template</p></h5><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">></span>
  <span class="token operator">&lt;</span>div
    <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"fc-wrap"</span>
    <span class="token operator">:</span>style<span class="token operator">=</span>"<span class="token punctuation">&#123;</span>
      <span class="token string-property property">'--fc-default-color'</span><span class="token operator">:</span> color<span class="token punctuation">,</span>
      <span class="token string-property property">'--fc-active-color'</span><span class="token operator">:</span> activeColor<span class="token punctuation">,</span>
      <span class="token string-property property">'--fc-background-color'</span><span class="token operator">:</span> backgroundColor<span class="token punctuation">,</span>
      <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token punctuation">(</span>height <span class="token operator">?</span> height <span class="token operator">:</span> autoHeight<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span>"
  <span class="token operator">></span>
    <span class="token operator">&lt;</span>div
      <span class="token operator">:</span><span class="token keyword">class</span><span class="token operator">=</span>"<span class="token punctuation">[</span>
        <span class="token string">'fc-item'</span><span class="token punctuation">,</span>
        i <span class="token operator">&lt;=</span> activeSteps <span class="token operator">?</span> <span class="token string">'fc-item--active '</span> <span class="token operator">+</span> activeStyle <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
        i <span class="token operator">&lt;</span> activeSteps <span class="token operator">?</span> <span class="token string">'fc-item--active-before'</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
        i <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">'fc-item--head'</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
        i <span class="token operator">===</span> contentList<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token string">'fc-item--tail'</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
        v<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token string">'fc-item--multipart'</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span>"
      <span class="token operator">:</span>style<span class="token operator">=</span><span class="token string">"'flex: ' + 1"</span>
      v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"(v, i) in contentList"</span>
      <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">"i"</span>
    <span class="token operator">></span>
      <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"fc-part"</span> v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"(t, n) in v"</span> <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">"n"</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"fc-part-inner"</span><span class="token operator">></span>
          <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"title"</span><span class="token operator">></span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> t<span class="token punctuation">.</span>title <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
          <span class="token operator">&lt;</span>div <span class="token operator">:</span><span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"'description--' + descriptionLocation"</span><span class="token operator">></span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> t<span class="token punctuation">.</span>description <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span></code></pre>

<h5 id="script"><a href="#script" class="headerlink" title="script"></a><p>script</p></h5><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>script<span class="token operator">></span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token literal-property property">contentList</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      <span class="token comment">/* 流程列表，传参类型
        [
          [
            &#123; title: 'step1-1', description: 'this is step1-1' &#125;,
            &#123; title: 'step1-2', description: 'this is step1-2' &#125;,
          ],
          [
            &#123; title: 'step2', description: 'this is step2' &#125;,
          ],
          [
            &#123; title: 'step3', description: 'this is step3' &#125;,
          ],
          [
            &#123; title: 'step4', description: 'this is step4' &#125;,
            &#123; title: 'step4-1', description: 'this is step4-1' &#125;
          ]
        ]
      */</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> Array<span class="token punctuation">,</span>
      <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token function-variable function">default</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token function">validator</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> val<span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token parameter">step</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
          <span class="token keyword">return</span> step<span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">let</span> keys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
            <span class="token keyword">return</span> keys<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> keys<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'description'</span><span class="token punctuation">)</span>
          <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token comment">/* 当前进度 */</span>
    <span class="token literal-property property">activeSteps</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> Number<span class="token punctuation">,</span>
      <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">activeStyle</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'left'</span><span class="token punctuation">,</span>
      <span class="token function">validator</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token string">'left'</span><span class="token punctuation">,</span> <span class="token string">'center'</span><span class="token punctuation">,</span> <span class="token string">'right'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">descriptionLocation</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'in'</span><span class="token punctuation">,</span>
      <span class="token function">validator</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token string">'in'</span><span class="token punctuation">,</span> <span class="token string">'out'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'#ccc'</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">activeColor</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'#67c23a'</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">backgroundColor</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'#fff'</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">''</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
      <span class="token literal-property property">autoHeight</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">/* 根据子流程最大步骤数量自适应高度 */</span>
    <span class="token function">initHeight</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>contentList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>autoHeight <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>autoHeight<span class="token punctuation">,</span> item<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>autoHeight <span class="token operator">*=</span> <span class="token number">70</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre>

<h5 id="style"><a href="#style" class="headerlink" title="style"></a><p>style</p></h5><pre class="language-scss" data-language="scss"><code class="language-scss">&lt;style lang=<span class="token string">"scss"</span> scoped>
<span class="token property"><span class="token variable">$line-width</span></span><span class="token punctuation">:</span> 1.5px<span class="token punctuation">;</span>
<span class="token property"><span class="token variable">$border-width</span></span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span>
<span class="token selector">.fc-wrap </span><span class="token punctuation">&#123;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>

  <span class="token selector">.fc-item </span><span class="token punctuation">&#123;</span>
    <span class="token property">flex</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>

    <span class="token selector">.fc-part </span><span class="token punctuation">&#123;</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
      <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
      <span class="token property">transition</span><span class="token punctuation">:</span> 0.5s<span class="token punctuation">;</span>

      <span class="token selector"><span class="token parent important">&amp;</span>::before </span><span class="token punctuation">&#123;</span>
        <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span>
      <span class="token selector"><span class="token parent important">&amp;</span>::after </span><span class="token punctuation">&#123;</span>
        <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span>

      <span class="token selector"><span class="token parent important">&amp;</span>::before,
      <span class="token parent important">&amp;</span>::after </span><span class="token punctuation">&#123;</span>
        <span class="token property">flex</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
        <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">;</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 25%<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> <span class="token variable">$line-width</span><span class="token punctuation">;</span>
        <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
        <span class="token property">top</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>50% <span class="token operator">-</span> 1px<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--fc-default-color<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token property">transition</span><span class="token punctuation">:</span> 0.5s<span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token selector">.fc-part-inner </span><span class="token punctuation">&#123;</span>
      <span class="token property">transition</span><span class="token punctuation">:</span> 0.5s<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token selector">.fc-wrap .fc-item--head .fc-part::before,
.fc-wrap .fc-item--tail .fc-part::after </span><span class="token punctuation">&#123;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token selector">.fc-wrap .fc-part-inner </span><span class="token punctuation">&#123;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
  <span class="token property">margin-left</span><span class="token punctuation">:</span> 25%<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
  <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> <span class="token variable">$border-width</span> solid <span class="token function">var</span><span class="token punctuation">(</span>--fc-default-color<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--fc-default-color<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token selector">.title </span><span class="token punctuation">&#123;</span>
    <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token selector">.description--out </span><span class="token punctuation">&#123;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">bottom</span><span class="token punctuation">:</span> -1.5rem<span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">/* 多个环节时 */</span>
<span class="token selector">.fc-wrap .fc-item--multipart </span><span class="token punctuation">&#123;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
  <span class="token property">justify-content</span><span class="token punctuation">:</span> space-evenly<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>

  <span class="token selector"><span class="token parent important">&amp;</span>.fc-item--head::before,
  <span class="token parent important">&amp;</span>.fc-item--tail::after </span><span class="token punctuation">&#123;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token selector"><span class="token parent important">&amp;</span>::before,
  <span class="token parent important">&amp;</span>::after </span><span class="token punctuation">&#123;</span>
    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> <span class="token variable">$line-width</span><span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--fc-default-color<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">transition</span><span class="token punctuation">:</span> 0.5s<span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token selector"><span class="token parent important">&amp;</span>::before </span><span class="token punctuation">&#123;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token selector"><span class="token parent important">&amp;</span>::after </span><span class="token punctuation">&#123;</span>
    <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token selector">.fc-part:first-child </span><span class="token punctuation">&#123;</span>
    <span class="token selector"><span class="token parent important">&amp;</span>::before,
    <span class="token parent important">&amp;</span>::after </span><span class="token punctuation">&#123;</span>
      <span class="token property">top</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>
      <span class="token property">bottom</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>50% <span class="token operator">-</span> 1px<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
      <span class="token property">border-top</span><span class="token punctuation">:</span> 999px solid <span class="token function">var</span><span class="token punctuation">(</span>--fc-background-color<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token property">border-bottom</span><span class="token punctuation">:</span> 1px solid <span class="token function">var</span><span class="token punctuation">(</span>--fc-default-color<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token property">box-sizing</span><span class="token punctuation">:</span> content-box<span class="token punctuation">;</span>
      <span class="token property">z-index</span><span class="token punctuation">:</span> 999<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token selector">.fc-part:last-child::before,
  .fc-part:last-child::after </span><span class="token punctuation">&#123;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">border-top</span><span class="token punctuation">:</span> 1px solid <span class="token function">var</span><span class="token punctuation">(</span>--fc-default-color<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">border-bottom</span><span class="token punctuation">:</span> 999px solid <span class="token function">var</span><span class="token punctuation">(</span>--fc-background-color<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">box-sizing</span><span class="token punctuation">:</span> content-box<span class="token punctuation">;</span>
    <span class="token property">z-index</span><span class="token punctuation">:</span> 999<span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">/* active */</span>
<span class="token selector">.fc-wrap .fc-item--active-before </span><span class="token punctuation">&#123;</span>
  <span class="token selector">.fc-part::before,
  .fc-part::after,
  <span class="token parent important">&amp;</span>.fc-item--multipart::before,
  <span class="token parent important">&amp;</span>.fc-item--multipart::after </span><span class="token punctuation">&#123;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--fc-active-color<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token selector"><span class="token parent important">&amp;</span>.fc-item--multipart </span><span class="token punctuation">&#123;</span>
    <span class="token selector">.fc-part:first-child::before,
    .fc-part:first-child::after </span><span class="token punctuation">&#123;</span>
      <span class="token property">border-bottom-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--fc-active-color<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token selector">.fc-part:last-child::before,
    .fc-part:last-child::after </span><span class="token punctuation">&#123;</span>
      <span class="token property">border-top-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--fc-active-color<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token selector">.fc-wrap .fc-item--active </span><span class="token punctuation">&#123;</span>
  <span class="token selector"><span class="token parent important">&amp;</span>.left </span><span class="token punctuation">&#123;</span>
    <span class="token selector">.fc-part::before,
    <span class="token parent important">&amp;</span>.fc-item--multipart::before </span><span class="token punctuation">&#123;</span>
      <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--fc-active-color<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token selector"><span class="token parent important">&amp;</span>.fc-item--multipart </span><span class="token punctuation">&#123;</span>
      <span class="token selector">.fc-part:first-child::before </span><span class="token punctuation">&#123;</span>
        <span class="token property">border-bottom-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--fc-active-color<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span>

      <span class="token selector">.fc-part:last-child::before </span><span class="token punctuation">&#123;</span>
        <span class="token property">border-top-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--fc-active-color<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token selector"><span class="token parent important">&amp;</span>.center,
  <span class="token parent important">&amp;</span>.right </span><span class="token punctuation">&#123;</span>
    <span class="token selector">.fc-part::before,
    .fc-part::after,
    <span class="token parent important">&amp;</span>.fc-item--multipart::before,
    <span class="token parent important">&amp;</span>.fc-item--multipart::after </span><span class="token punctuation">&#123;</span>
      <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--fc-active-color<span class="token punctuation">)</span> <span class="token important">!important</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token selector"><span class="token parent important">&amp;</span>.fc-item--multipart </span><span class="token punctuation">&#123;</span>
      <span class="token selector">.fc-part:first-child::before,
      .fc-part:first-child::after </span><span class="token punctuation">&#123;</span>
        <span class="token property">border-bottom-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--fc-active-color<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span>

      <span class="token selector">.fc-part:last-child::before,
      .fc-part:last-child::after </span><span class="token punctuation">&#123;</span>
        <span class="token property">border-top-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--fc-active-color<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token selector"><span class="token parent important">&amp;</span>.right + .fc-item </span><span class="token punctuation">&#123;</span>
    <span class="token selector">.fc-part::before,
    <span class="token parent important">&amp;</span>.fc-item--multipart::before </span><span class="token punctuation">&#123;</span>
      <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--fc-active-color<span class="token punctuation">)</span> <span class="token important">!important</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token selector"><span class="token parent important">&amp;</span>.fc-item--multipart </span><span class="token punctuation">&#123;</span>
      <span class="token selector">.fc-part:first-child::before </span><span class="token punctuation">&#123;</span>
        <span class="token property">border-bottom-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--fc-active-color<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span>

      <span class="token selector">.fc-part:last-child::before </span><span class="token punctuation">&#123;</span>
        <span class="token property">border-top-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--fc-active-color<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token selector">.fc-part-inner </span><span class="token punctuation">&#123;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--fc-active-color<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">border-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--fc-active-color<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
&lt;/style></code></pre>

<h4 id="实现思路"><a href="#实现思路" class="headerlink" title="实现思路"></a><center>实现思路</center></h4><p>样式的实现，几乎都是通过动态设置不同的<code>Class</code>来对样式进行操作和变换，也算是对自己<code>CSS</code>功底的考验。唯一用到<code>js</code>的部分就是，获取当前流程中子流程最多的步骤数，然后自适应流程图的高度。<br>讲讲这个组件功能实现中，自我感觉最巧妙的部分：<code>当子流程有多个步骤时，如何绘制将子流程连接起来的线条？</code></p>
<ul>
<li><p>每个流程前后的线段是用它们各自的<code>::before</code>、<code>::after</code>伪类实现；</p>
</li>
<li><p>而连接子流程的线段同样也是用最外层父元素的<code>::before</code>、<code>::after</code>伪类实现；</p>
</li>
<li><p>关键点在于，父元素的伪类高度如何刚好与最上面的步骤和最下面的步骤刚好连接在一起？</p>
</li>
<li><p>最开始是想通过<code>js</code>实现，但会很麻烦，仔细想想过后，其实只要把多余的部分掩盖掉，就能在视觉上呈现出两条线段连接在一起的效果；</p>
<img src="/98d80ddf0bcb/10.31-5.png" class="">

<h4 id="-4"><a href="#-4" class="headerlink" title=""></a></h4></li>
<li><p>然后我调整了子流程中，首尾两个步骤的伪类样式：</p>
<ul>
<li><p>头部步骤：</p>
<ul>
<li><p><code>::before</code>、<code>::after</code>:</p>
<pre class="language-css" data-language="css"><code class="language-css"><span class="token property">height</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token property">border-top</span><span class="token punctuation">:</span> 无限大（这里我给的是 999px<span class="token punctuation">)</span> solid 背景色<span class="token punctuation">;</span>
<span class="token property">border-bottom</span><span class="token punctuation">:</span> 1px solid 线条颜色<span class="token punctuation">;</span></code></pre></li>
</ul>
</li>
<li><p>尾部步骤：</p>
<ul>
<li><p><code>::before</code>、<code>::after</code>:</p>
<pre class="language-css" data-language="css"><code class="language-css"><span class="token property">height</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token property">border-top</span><span class="token punctuation">:</span> 1px solid 线条颜色
<span class="token property">border-bottom</span><span class="token punctuation">:</span> 999px solid 背景色</code></pre></li>
</ul>
</li>
<li><p>效果如图（若背景色为红色），设置<code>height</code>+<code>border-top/bottom</code>同样也能实现。</p>
<img src="/98d80ddf0bcb/10.31-6.png" class="">

<h4 id="-5"><a href="#-5" class="headerlink" title=""></a></h4></li>
<li><p>最后，给父元素设置<code>overflow: hidden</code>，PERFECT！</p>
</li>
</ul>
</li>
</ul>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><a class="button is-default" href="/ae59ddb3f9dd.html" title="如何在NPM上发布一个自己的插件库"><i class="iconfont icon-prev mr-2 has-text-grey"></i><span class="has-text-weight-semibold">上一页: 如何在NPM上发布一个自己的插件库</span></a><a class="button is-default" href="/5c8211979535.html" title="搭配el-cascader实现一个级联选择日期组件"><span class="has-text-weight-semibold">下一页: 搭配el-cascader实现一个级联选择日期组件</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section><article class="mt-6 comment-container"><script async repo="showlotus/showlotus" src="https://utteranc.es/client.js" issue-term="pathname" theme="preferred-color-scheme"></script></article></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><!-- TODO 配置个人网站链接--><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/showlotus"><i class="iconfont icon-github"></i></a><!-- Gitee--><!-- Ins--><!-- RSS--><!-- 知乎--><!-- 领英--><!-- 脸书--></section><p><span>Copyright ©</span><span> showlotus 2025</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"></div><div><span></span></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/post.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@2.1.4/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js"></script><script src="/js/clipboard_use.js"></script><script src="/js/codepen.io.js"></script></body></html>
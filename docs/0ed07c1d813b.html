<!DOCTYPE html><html class="appearance-light" lang="zh-CN"><head><meta charset="UTF-8"><title>å½“ JSON å­—ç¬¦ä¸²æ›´æ–°æ—¶æ·»åŠ æç¤ºåŠ¨ç”»ğŸ¦„ &lt;W17&gt;</title><meta name="description" content="I hope one day, everyone is using my program."><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><!-- Google Analytics --><!-- End Google Analytics -->
<!-- Baidu Analytics --><!-- End Baidu Analytics --><link rel="icon" href="/images/favicon.png"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><script src="/js/highlight.pack.js"></script><meta name="description" content="


ä¸ºäº†ä¾¿äºç”¨æˆ·èƒ½ç›´è§‚åœ°çœ‹åˆ°é…ç½®é¡¹çš„ä¸€äº›å±æ€§ï¼Œäºæ˜¯æŠŠæ•´ä¸ªé…ç½®ä»¥ä¸€ä¸ª JSON ä¸²çš„å½¢å¼å±•ç¤ºã€‚æœ¬æ¥æ‰“ç®—ä»¥ä¸€ä¸ªè¡¨æ ¼æˆ–è€…åˆ—è¡¨çš„å½¢å¼å±•ç¤ºï¼Œä¸è¿‡é…ç½®é¡¹ä¸­æŸäº›å±æ€§æ˜¯ Object ç±»å‹ï¼Œæ€æ¥æƒ³å»ï¼Œè¿˜æ˜¯ JSON ä¸²æ›´ç›´è§‚ä¸€ç‚¹ã€‚ä½†æ˜¯å½“æŸä¸ªé…ç½®æ”¹å˜æ—¶ï¼ŒJSON é‡Œçš„å˜åŠ¨ä¸æ˜¯å¾ˆæ˜æ˜¾ï¼ˆå¦‚ä¸‹å›¾æ‰€ç¤ºï¼‰ã€‚å½“è¿™ä¸ª JSON é‡Œçš„å±æ€§å¤ªå¤šæ—¶ï¼Œå°±ä¸å®¹æ˜“èƒ½æ³¨æ„åˆ°æ˜¯å“ªä¸ªé…ç½®å˜äº†ã€‚äºæ˜¯ï¼Œå°±æƒ³èƒ½ä¸èƒ½åšä¸€ä¸ªå±æ€§å˜åŒ–çš„æç¤ºï¼Œå½“æŸä¸ªé…ç½®æ”¹å˜æ—¶ï¼Œæ˜¾ç¤ºä¸€ä¸ªé«˜äº®çš„åŠ¨ç”»ä»€ä¹ˆçš„ï¼Œæç¤ºç”¨æˆ·è¿™ä¸ªé…ç½®æ”¹å˜äº† ğŸ¤”ã€‚æƒ³æ³•æœ‰äº†ï¼Œå‡†å¤‡å†»æ‰‹ï¼



æ€è·¯å°† JSON ä¸²åˆ†è¡Œï¼Œæ ¹æ®å½“å‰æ”¹å˜çš„å±æ€§å»æ‰¾åˆ°è¯¥å±æ€§å¯¹åº”çš„è¡ŒåŒºé—´ï¼Œç„¶åé«˜äº®æ˜¾ç¤ºè¿™äº›è¡Œã€‚æ•´ä¸ªæµç¨‹å¦‚ä¸‹ï¼š


Step.Oneï¼šæ›´æ”¹å±æ€§è€ƒè™‘åˆ°è¿™ä¸ªå¯¹è±¡çš„å±æ€§å¤ªå¤šï¼Œä¸“é—¨å†™ä¸ªè¡¨å•å»æ›´æ”¹ï¼Œå®åœ¨å¤ªéº»çƒ¦äº†ã€‚äºæ˜¯ï¼Œå°±æƒ³äº†ä¸€ä¸ªæ–¹æ³•ï¼šéšæœºå»æ›´æ”¹.."><meta name="generator" content="Hexo 5.4.2"></head><body class="is-flex is-flex-direction-column"><header class="header-widget is-flex-shrink-0 is-hidden-mobile"><div class="container is-fullhd is-flex is-justify-content-space-between is-align-items-center is-full-height"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">showlotus's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">å½“ JSON å­—ç¬¦ä¸²æ›´æ–°æ—¶æ·»åŠ æç¤ºåŠ¨ç”»ğŸ¦„ &lt;W17&gt;</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">ç‚¹å‡»è¿”å›é¡¶éƒ¨</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">é¦–é¡µ</a></h3><h3 class="is-inline-block"><a href="/archives">å½’æ¡£</a></h3></aside></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">é¦–é¡µ</a></h3><h3 class="is-inline-block"><a href="/archives">å½’æ¡£</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%9D%E8%B7%AF"><span class="toc-text">æ€è·¯</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Step-One%EF%BC%9A%E6%9B%B4%E6%94%B9%E5%B1%9E%E6%80%A7"><span class="toc-text">Step.Oneï¼šæ›´æ”¹å±æ€§</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Step-Two%EF%BC%9A%E7%94%9F%E6%88%90-JSON-%E4%B8%B2%EF%BC%8C%E5%B9%B6%E5%88%86%E8%A1%8C"><span class="toc-text">Step.Twoï¼šç”Ÿæˆ JSON ä¸²ï¼Œå¹¶åˆ†è¡Œ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Step-Three%EF%BC%9A%E8%AE%A1%E7%AE%97%E8%A1%8C%E5%8C%BA%E9%97%B4"><span class="toc-text">Step.Threeï¼šè®¡ç®—è¡ŒåŒºé—´</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Step-Four%EF%BC%9A%E9%AB%98%E4%BA%AE%E6%98%BE%E7%A4%BA%E8%A1%8C%E5%8C%BA%E9%97%B4"><span class="toc-text">Step.Fourï¼šé«˜äº®æ˜¾ç¤ºè¡ŒåŒºé—´</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%80%E7%BB%88%E6%95%88%E6%9E%9C"><span class="toc-text">æœ€ç»ˆæ•ˆæœ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-text">æ€»ç»“</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B7%A5%E5%85%B7%E5%87%BD%E6%95%B0"><span class="toc-text">å·¥å…·å‡½æ•°</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#getType"><span class="toc-text">getType</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#isObject"><span class="toc-text">isObject</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#flattenObj"><span class="toc-text">flattenObj</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#updateValByChainKey"><span class="toc-text">updateValByChainKey</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#genOtherTypeValue"><span class="toc-text">genOtherTypeValue</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#getPropRowsFromJSON"><span class="toc-text">getPropRowsFromJSON</span></a></li></ol></li></ol></div><div class="column is-9"><header class="my-4"><a href="/tags/CSS"><i class="tag post-item-tag">CSS</i></a><a href="/tags/JavaScript"><i class="tag post-item-tag">JavaScript</i></a><a href="/tags/JSON"><i class="tag post-item-tag">JSON</i></a><a href="/tags/Vue"><i class="tag post-item-tag">Vue</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">å½“ JSON å­—ç¬¦ä¸²æ›´æ–°æ—¶æ·»åŠ æç¤ºåŠ¨ç”»ğŸ¦„ &lt;W17&gt;</h1><time class="has-text-grey custom-date-font" datetime="2023-01-18T12:19:53.000Z">2023/01/18 12:19</time><article class="mt-2 post-content"><img src="/0ed07c1d813b/banner.jpg" class="">

<blockquote>
<p>ä¸ºäº†ä¾¿äºç”¨æˆ·èƒ½ç›´è§‚åœ°çœ‹åˆ°é…ç½®é¡¹çš„ä¸€äº›å±æ€§ï¼Œäºæ˜¯æŠŠæ•´ä¸ªé…ç½®ä»¥ä¸€ä¸ª <em>JSON</em> ä¸²çš„å½¢å¼å±•ç¤ºã€‚æœ¬æ¥æ‰“ç®—ä»¥ä¸€ä¸ªè¡¨æ ¼æˆ–è€…åˆ—è¡¨çš„å½¢å¼å±•ç¤ºï¼Œä¸è¿‡é…ç½®é¡¹ä¸­æŸäº›å±æ€§æ˜¯ <em>Object</em> ç±»å‹ï¼Œæ€æ¥æƒ³å»ï¼Œè¿˜æ˜¯ <em>JSON</em> ä¸²æ›´ç›´è§‚ä¸€ç‚¹ã€‚ä½†æ˜¯å½“æŸä¸ªé…ç½®æ”¹å˜æ—¶ï¼Œ<em>JSON</em> é‡Œçš„å˜åŠ¨ä¸æ˜¯å¾ˆæ˜æ˜¾ï¼ˆå¦‚ä¸‹å›¾æ‰€ç¤ºï¼‰ã€‚å½“è¿™ä¸ª <em>JSON</em> é‡Œçš„å±æ€§å¤ªå¤šæ—¶ï¼Œå°±ä¸å®¹æ˜“èƒ½æ³¨æ„åˆ°æ˜¯å“ªä¸ªé…ç½®å˜äº†ã€‚äºæ˜¯ï¼Œå°±æƒ³èƒ½ä¸èƒ½åšä¸€ä¸ªå±æ€§å˜åŒ–çš„æç¤ºï¼Œå½“æŸä¸ªé…ç½®æ”¹å˜æ—¶ï¼Œæ˜¾ç¤ºä¸€ä¸ªé«˜äº®çš„åŠ¨ç”»ä»€ä¹ˆçš„ï¼Œæç¤ºç”¨æˆ·è¿™ä¸ªé…ç½®æ”¹å˜äº† ğŸ¤”ã€‚æƒ³æ³•æœ‰äº†ï¼Œå‡†å¤‡å†»æ‰‹ï¼</p>
</blockquote>
<img src="/0ed07c1d813b/problem.gif" class="">

<h4 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h4><p>å°† <em>JSON</em> ä¸²åˆ†è¡Œï¼Œæ ¹æ®å½“å‰æ”¹å˜çš„å±æ€§å»æ‰¾åˆ°è¯¥å±æ€§å¯¹åº”çš„è¡ŒåŒºé—´ï¼Œç„¶åé«˜äº®æ˜¾ç¤ºè¿™äº›è¡Œã€‚æ•´ä¸ªæµç¨‹å¦‚ä¸‹ï¼š</p>
<img src="/0ed07c1d813b/0.png" class="">

<h4 id="Step-Oneï¼šæ›´æ”¹å±æ€§"><a href="#Step-Oneï¼šæ›´æ”¹å±æ€§" class="headerlink" title="Step.Oneï¼šæ›´æ”¹å±æ€§"></a>Step.Oneï¼šæ›´æ”¹å±æ€§</h4><p>è€ƒè™‘åˆ°è¿™ä¸ªå¯¹è±¡çš„å±æ€§å¤ªå¤šï¼Œä¸“é—¨å†™ä¸ªè¡¨å•å»æ›´æ”¹ï¼Œå®åœ¨å¤ªéº»çƒ¦äº†ã€‚äºæ˜¯ï¼Œå°±æƒ³äº†ä¸€ä¸ªæ–¹æ³•ï¼šéšæœºå»æ›´æ”¹æŸä¸ªå±æ€§ã€‚</p>
<p>è¿™é‡Œåªå¯¹æœ€åº•å±‚çš„å­å±æ€§åšä¿®æ”¹ï¼Œä¾‹å¦‚ï¼Œå¯¹äºä¸‹æ–¹çš„ <em>obj</em> å¯¹è±¡ï¼š</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"Tom"</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
  <span class="token literal-property property">address</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token literal-property property">province</span><span class="token operator">:</span> <span class="token string">"A"</span><span class="token punctuation">,</span>
    <span class="token literal-property property">city</span><span class="token operator">:</span> <span class="token string">"B"</span><span class="token punctuation">,</span>
    <span class="token literal-property property">county</span><span class="token operator">:</span> <span class="token string">"C"</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>å¯ä»¥ä¿®æ”¹çš„å±æ€§æœ‰ï¼š</p>
<ul>
<li><code>obj.name</code></li>
<li><code>obj.age</code></li>
<li><code>obj.address.province</code></li>
<li><code>obj.address.city</code></li>
<li><code>obj.address.county</code></li>
</ul>
<p>æ²¡æœ‰å¯¹ <code>obj.address</code> åšæ›´æ”¹å“¦ï¼ï¼ï¼</p>
<p>æŒ‰ç…§ä¸Šæ–¹ç½—åˆ—çš„å±æ€§ï¼Œæƒ³å¿…ä½ ä¹ŸçŒœåˆ°äº†ï¼Œéœ€è¦å¯¹æºå¯¹è±¡è¿›è¡Œã€Œ æ‰å¹³åŒ– ã€å¤„ç†ï¼Œä¹Ÿå³æŠŠä¸Šè¿°çš„ <em>obj</em> å¯¹è±¡è½¬æˆä¸‹é¢è¿™ç§æ ¼å¼ï¼š</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> flattenObj <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  <span class="token string-property property">"obj.name"</span><span class="token operator">:</span> <span class="token string">"Tom"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"obj.age"</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
  <span class="token string-property property">"obj.address.province"</span><span class="token operator">:</span> <span class="token string">"A"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"obj.address.city"</span><span class="token operator">:</span> <span class="token string">"B"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"obj.address.county"</span><span class="token operator">:</span> <span class="token string">"C"</span>
<span class="token punctuation">&#125;</span></code></pre>

<blockquote>
<p>ã€Œ æ‰å¹³åŒ– ã€çš„å…·ä½“å®ç°ï¼Œå¯ä»¥å‚è€ƒæ–‡æœ«çš„å·¥å…·å‡½æ•° <a href="#flattenObj"><big><em>flattenObj</em></big></a>ã€‚</p>
</blockquote>
<p>å·²çŸ¥å½“å‰å¯¹è±¡å¯æ›´æ”¹çš„å±æ€§æœ‰ <em>5</em> ä¸ªï¼Œéšæœºå–ä¸€ä¸ªå±æ€§ï¼Œé‚£ä¹ˆå°±å¯ä»¥å†™å‡ºä¸‹é¢è¿™æ®µä»£ç ï¼š</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> newObj <span class="token operator">=</span> <span class="token function">flattenObj</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
<span class="token keyword">const</span> keys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>newObj<span class="token punctuation">)</span>
<span class="token keyword">const</span> key <span class="token operator">=</span> keys<span class="token punctuation">[</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> keys<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">]</span></code></pre>

<p>æ‹¿åˆ°è¿™ä¸ª <em>key</em> åï¼Œå°±å¯ä»¥å»åšä¿®æ”¹äº†ã€‚ä¸ºäº†è®©è¿™ä¸ªå±æ€§æ›´æ”¹åçš„å€¼æ›´å…·æœ‰å·®å¼‚æ€§ï¼Œå¯ä»¥è®©æ›´æ”¹åçš„å€¼ç±»å‹ä¸åŒäºæºç±»å‹ã€‚äºæ˜¯åˆ¶å®šäº†ä¸€äº›æ›´æ”¹è§„åˆ™ï¼Œå¦‚ä¸‹ï¼š</p>
<ul>
<li><code>Array</code> -&gt; <code>Boolean</code>ï¼Œå³ <code>Array</code> ç±»å‹æ›´æ”¹åä¸º <code>Boolean</code> ç±»å‹ï¼Œä¸‹é¢ä»¥æ­¤ç±»æ¨ã€‚</li>
<li><code>Boolean</code> -&gt; <code>Number</code></li>
<li><code>Number</code> -&gt; <code>String</code></li>
<li><code>String</code> -&gt; <code>Array</code></li>
</ul>
<p>ä¾‹å¦‚ï¼Œå¯¹äºä¸‹æ–¹çš„ <em>obj</em> å¯¹è±¡ï¼š</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"Tom"</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
  <span class="token literal-property property">student</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">likes</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"apple"</span><span class="token punctuation">,</span> <span class="token string">"banana"</span><span class="token punctuation">,</span> <span class="token string">"pear"</span><span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>æŒ‰ç…§ä¸Šè¿°è§„åˆ™ï¼Œæ›´æ”¹åçš„å€¼å¯èƒ½ä¸ºï¼š</p>
<pre class="language-diff" data-language="diff"><code class="language-diff">const obj = &#123;
<span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> name: "Tom",
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> name: [1, 2],
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> age: 20,
</span><span class="token prefix unchanged"> </span><span class="token line"> student: true,
</span><span class="token prefix unchanged"> </span><span class="token line"> likes: ["apple", "banana", "pear"]
</span></span>&#125;</code></pre>

<p>ä¹Ÿå¯èƒ½ä¸ºï¼š</p>
<pre class="language-diff" data-language="diff"><code class="language-diff">const obj = &#123;
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> name: "Tom",
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> age: 20,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> age: "asx",
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> student: true,
</span><span class="token prefix unchanged"> </span><span class="token line"> likes: ["apple", "banana", "pear"]
</span></span>&#125;</code></pre>

<p>ä¹Ÿå¯èƒ½ä¸ºï¼š</p>
<pre class="language-diff" data-language="diff"><code class="language-diff">const obj = &#123;
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> name: "Tom",
</span><span class="token prefix unchanged"> </span><span class="token line"> age: 20,
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> student: true,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> student: 239,
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> likes: ["apple", "banana", "pear"]
</span></span>&#125;</code></pre>

<p>ä¹Ÿå¯èƒ½ä¸ºï¼š</p>
<pre class="language-diff" data-language="diff"><code class="language-diff">const obj = &#123;
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> name: "Tom",
</span><span class="token prefix unchanged"> </span><span class="token line"> age: 20,
</span><span class="token prefix unchanged"> </span><span class="token line"> student: true,
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> likes: ["apple", "banana", "pear"]
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> likes: true
</span></span>&#125;</code></pre>

<blockquote>
<p>å…·ä½“å®ç°å¯ä»¥å‚è€ƒæ–‡æœ«çš„å·¥å…·å‡½æ•° <a href="#genOtherTypeValue"><big><em>genOtherTypeValue</em></big></a>ã€‚</p>
</blockquote>
<p>å·²çŸ¥éœ€è¦æ›´æ–°çš„ <em>key</em> å’Œéœ€è¦æ›´æ”¹çš„å€¼äº†ï¼Œå°±å¯ä»¥å»å¯¹æºå¯¹è±¡åšä¿®æ”¹äº†ã€‚</p>
<p>å› ä¸ºæ‹¿åˆ°è¿™ä¸ª <em>key</em> æ˜¯ã€Œ æ‰å¹³åŒ– ã€åçš„ï¼Œä¹Ÿå³æ˜¯é“¾å¼çš„ã€‚å¦‚æœæƒ³ç”¨è¿™ä¸ª <em>key</em> å»æ›´æ”¹æºå¯¹è±¡ <em>obj</em> ä¸­å¯¹åº”çš„å±æ€§ï¼Œéœ€è¦åšä¸€äº›å¤„ç†ã€‚ç”¨ä¸€ä¸ªå·¥å…·å‡½æ•° <a href="#updateValByChainKey"><big><em>updateValByChainKey</em></big></a> æ ¹æ®é“¾å¼çš„ <em>key</em> å»æ›´æ–°å¯¹è±¡ä¸­çš„å€¼ï¼Œä»¥åŠ <a href="#getType"><big><em>getType</em></big></a> å»è·å–å½“å‰çš„å€¼ç±»å‹ã€‚</p>
<p>å®Œå–„ä¸Šé¢çš„ä»£ç åï¼Œå¦‚ä¸‹ï¼š</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> newObj <span class="token operator">=</span> <span class="token function">flattenObj</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
<span class="token keyword">const</span> keys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>newObj<span class="token punctuation">)</span>
<span class="token keyword">const</span> key <span class="token operator">=</span> keys<span class="token punctuation">[</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> keys<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token comment">// æ–°å¢</span>
<span class="token keyword">const</span> type <span class="token operator">=</span> <span class="token function">getType</span><span class="token punctuation">(</span>newObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> newVal <span class="token operator">=</span> <span class="token function">genOtherTypeValue</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span>
<span class="token function">updateValByChainKey</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> key<span class="token punctuation">,</span> newVal<span class="token punctuation">)</span></code></pre>

<p>æºå¯¹è±¡å·²ç»æ›´æ–°äº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯ç”Ÿæˆæ–°çš„ <em>JSON</em> ä¸²ï¼Œç„¶ååˆ†è¡Œã€‚</p>
<h4 id="Step-Twoï¼šç”Ÿæˆ-JSON-ä¸²ï¼Œå¹¶åˆ†è¡Œ"><a href="#Step-Twoï¼šç”Ÿæˆ-JSON-ä¸²ï¼Œå¹¶åˆ†è¡Œ" class="headerlink" title="Step.Twoï¼šç”Ÿæˆ JSON ä¸²ï¼Œå¹¶åˆ†è¡Œ"></a>Step.Twoï¼šç”Ÿæˆ JSON ä¸²ï¼Œå¹¶åˆ†è¡Œ</h4><p>é€šè¿‡ <code>JSON.stringify(obj, null, 2)</code> ç”Ÿæˆ <em>JSON</em> ä¸²ã€‚å› ä¸ºè¦æ ¹æ®è¡Œå·æ¥æ·»åŠ é«˜äº®æ•ˆæœï¼Œç›´æ¥æ“ä½œæ•´ä¸ª <em>JSON</em> ä¸²è‚¯å®šä¸è¡Œï¼Œæ‰€ä»¥éœ€è¦å¯¹æ•´ä¸ª <em>JSON</em> ä¸²è¿›è¡Œåˆ†è¡Œï¼Œç›´æ¥è°ƒç”¨ <code>String.split(&quot;\n&quot;)</code> å°±è¡Œï¼Œå±•ç¤ºæ—¶ï¼Œèµ·å§‹è¡Œå·è®¾ä¸º <em>1</em> ï¼ˆå¦‚ä¸‹å›¾æ‰€ç¤ºï¼‰ã€‚</p>
<img src="/0ed07c1d813b/1.png" class="">

<h4 id="Step-Threeï¼šè®¡ç®—è¡ŒåŒºé—´"><a href="#Step-Threeï¼šè®¡ç®—è¡ŒåŒºé—´" class="headerlink" title="Step.Threeï¼šè®¡ç®—è¡ŒåŒºé—´"></a>Step.Threeï¼šè®¡ç®—è¡ŒåŒºé—´</h4><p>ä¸¾ä¸ªä¾‹å­ï¼Œ<code>colorMultiType</code> çš„è¡ŒåŒºé—´å°±æ˜¯ <code>[3, 13]</code>ã€<code>colorMultiType.start</code> çš„è¡ŒåŒºé—´å°±æ˜¯ <code>[4, 7]</code>ã€<code>colorMultiType.start.color</code> çš„è¡ŒåŒºé—´å°±æ˜¯ <code>[5, 5]</code> æˆ–è€… <code>[5]</code>ã€‚</p>
<img src="/0ed07c1d813b/2.png" class="">

<p>åŒæ ·ï¼Œä¸ºäº†æ–¹ä¾¿è®°å½•è¡ŒåŒºé—´ï¼Œä¹Ÿéœ€è¦è¿›è¡Œã€Œ æ‰å¹³åŒ– ã€å¤„ç†ï¼Œç”¨è¿™ä¸ªã€Œ æ‰å¹³åŒ– ã€åçš„å¯¹è±¡å»è®°å½•æ¯ä¸ªå±æ€§å¯¹åº”çš„è¡ŒåŒºé—´ï¼Œè·å–åˆ°å„ä¸ªå±æ€§çš„è¡ŒåŒºé—´åçš„å¯¹è±¡ <em>rowObj</em> å¦‚ä¸‹ï¼š</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> rowObj <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  <span class="token literal-property property">colorCommon</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">colorMultiType</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string-property property">"colorMultiType.start"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string-property property">"colorMultiType.start.color"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string-property property">"colorMultiType.start.offset"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string-property property">"colorMultiType.end"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string-property property">"colorMultiType.end.color"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string-property property">"colorMultiType.end.offset"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string-property property">"colorMultiType.direction"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">colorGradient</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string-property property">"colorGradient.show"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string-property property">"colorGradient.fromColor"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string-property property">"colorGradient.toColor"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">17</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string-property property">"colorGradient.angle"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">colorTextShadow</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">24</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string-property property">"colorTextShadow.size"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">21</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string-property property">"colorTextShadow.color"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">22</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string-property property">"colorTextShadow.show"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">colorGroup</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">29</span><span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span></code></pre>

<blockquote>
<p>è·å–è¡ŒåŒºé—´çš„å…·ä½“å®ç°ï¼Œå¯ä»¥å‚è€ƒæ–‡æœ«çš„å·¥å…·å‡½æ•° <a href="#getPropRowsFromJSON"><big><em>getPropRowsFromJSON</em></big></a>ã€‚</p>
</blockquote>
<h4 id="Step-Fourï¼šé«˜äº®æ˜¾ç¤ºè¡ŒåŒºé—´"><a href="#Step-Fourï¼šé«˜äº®æ˜¾ç¤ºè¡ŒåŒºé—´" class="headerlink" title="Step.Fourï¼šé«˜äº®æ˜¾ç¤ºè¡ŒåŒºé—´"></a>Step.Fourï¼šé«˜äº®æ˜¾ç¤ºè¡ŒåŒºé—´</h4><p>åœ¨ <em>Step.One</em> ä¸­ï¼Œæ‹¿åˆ°äº†æ›´æ”¹çš„å±æ€§ <em>key</em> ï¼Œåœ¨ <em>Step.Three</em> ä¸­æ‹¿åˆ°äº†æ¯ä¸ªå±æ€§å¯¹åº”çš„è¡ŒåŒºé—´å¯¹è±¡ <em>rowObj</em> ï¼Œé‚£ä¹ˆéœ€è¦é«˜äº®çš„è¡ŒåŒºé—´ <code>highLightRows = rowObj[key]</code>ã€‚åŒºé—´è¡Œçš„é«˜äº®é€šè¿‡ <em>CSS</em> æ·»åŠ ä¸€ä¸ªé«˜äº® <em>Class</em> æ¥å®ç°ã€‚</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">></span>
  <span class="token operator">&lt;</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span>div v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"(item, i) in strList"</span> <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">"i"</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"line-wrap"</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>span <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"line-num"</span><span class="token operator">></span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> i <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>
        <span class="token operator">&lt;</span>pre <span class="token operator">:</span><span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"isHighLight(i + 1)"</span><span class="token operator">></span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> item<span class="token punctuation">.</span>text <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>pre<span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span></code></pre>

<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>script<span class="token operator">></span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
      <span class="token literal-property property">strList</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// æŒ‰ "\n" åˆ†å‰²åçš„ JSON ä¸²æ•°ç»„</span>
      <span class="token literal-property property">highLightRows</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// é«˜äº®è¡ŒåŒºé—´</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token function">isHighLight</span><span class="token punctuation">(</span><span class="token parameter">idx</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>highLightRows<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">''</span><span class="token punctuation">;</span>
      <span class="token comment">// å› ä¸ºæœ‰äº›è¡ŒåŒºé—´ï¼Œå¯èƒ½ä¸ºä¸€ä¸ªå…ƒç´ æˆ–è€…ä¸¤ä¸ªå…ƒç´ </span>
      <span class="token comment">// è¿™é‡Œåˆ¤æ–­ç´¢å¼•å¤§äºç­‰äºç¬¬ä¸€ä¸ªå…ƒç´ </span>
      <span class="token comment">// å¹¶ä¸”å°äºç­‰äºæœ€åä¸€ä¸ªå…ƒç´ </span>
      <span class="token comment">// è¿™æ ·å°±éƒ½èƒ½æ»¡è¶³å•¦</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>
        idx <span class="token operator">>=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>highLightRows<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span>
        idx <span class="token operator">&lt;=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>highLightRows<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>highLightRows<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span>
      <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token string">'tip'</span><span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span>
      <span class="token keyword">return</span> <span class="token string">''</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre>

<pre class="language-css" data-language="css"><code class="language-css"><span class="token comment">/* åŠ¨ç”»å‡½æ•° */</span>
<span class="token atrule"><span class="token rule">@keyframes</span> blingbling</span> <span class="token punctuation">&#123;</span>
  <span class="token selector">0%,
  50%,
  100%</span> <span class="token punctuation">&#123;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token selector">25%,
  75%</span> <span class="token punctuation">&#123;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> orange<span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token selector">.tip</span> <span class="token punctuation">&#123;</span>
  <span class="token property">animation</span><span class="token punctuation">:</span> blingbling ease 1s<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h4 id="æœ€ç»ˆæ•ˆæœ"><a href="#æœ€ç»ˆæ•ˆæœ" class="headerlink" title="æœ€ç»ˆæ•ˆæœ"></a>æœ€ç»ˆæ•ˆæœ</h4><div class="iframe-codepen" src="https://codepen.io/showlotus/full/vYaeQLW" width="100%" height="850"></div>

<h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><ul>
<li>è¿™é‡Œæ²¡æœ‰è€ƒè™‘æ•°ç»„å…ƒç´ ä¸­æœ‰å¯¹è±¡çš„æƒ…å†µï¼Œé»˜è®¤æ•°ç»„é‡Œéƒ½æ˜¯åŸºç¡€æ•°æ®ç±»å‹ã€‚</li>
<li><a href="#getPropRowsFromJSON"><big><em>getPropRowsFromJSON</em></big></a> è¿™ä¸ªæ–¹æ³•ï¼Œæ„Ÿè§‰å†™çš„ä¸æ˜¯å¾ˆå¥½ï¼ˆè™½ç„¶å†™çš„æ—¶å€™å¿«è‡ªé—­äº†ï¼‰ï¼Œåº”è¯¥æœ‰æ›´å¥½çš„æ–¹æ³• ğŸ¤”ã€‚</li>
<li>å·²çŸ¥å½“å‰æ›´æ”¹çš„å±æ€§äº†ï¼Œæ²¡æœ‰å¿…è¦æŠŠæ•´ä¸ªå¯¹è±¡çš„æ‰€æœ‰å±æ€§éƒ½ç”Ÿæˆè¡ŒåŒºé—´ï¼Œç®—æ˜¯ä¸€ä¸ªå¯ä»¥ä¼˜åŒ–çš„ç‚¹ã€‚</li>
</ul>
<h4 id="å·¥å…·å‡½æ•°"><a href="#å·¥å…·å‡½æ•°" class="headerlink" title="å·¥å…·å‡½æ•°"></a>å·¥å…·å‡½æ•°</h4><h5 id="getType"><a href="#getType" class="headerlink" title="getType"></a>getType</h5><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// è·å–ç±»å‹</span>
<span class="token keyword">function</span> <span class="token function">getType</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">return</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span></code></pre>

<h5 id="isObject"><a href="#isObject" class="headerlink" title="isObject"></a>isObject</h5><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// åˆ¤æ–­æ˜¯å¦æ˜¯ Object ç±»å‹</span>
<span class="token keyword">function</span> <span class="token function">isObject</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">return</span> <span class="token function">getType</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">"Object"</span>
<span class="token punctuation">&#125;</span></code></pre>

<h5 id="flattenObj"><a href="#flattenObj" class="headerlink" title="flattenObj"></a>flattenObj</h5><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// æ‰å¹³åŒ–å¯¹è±¡</span>
<span class="token keyword">function</span> <span class="token function">flattenObj</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>
  <span class="token keyword">const</span> handler <span class="token operator">=</span> <span class="token punctuation">(</span>obj<span class="token punctuation">,</span> prefix <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>prefix<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      prefix <span class="token operator">+=</span> <span class="token string">"."</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">const</span> newKey <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>prefix<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>key<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isObject</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token function">handler</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> newKey<span class="token punctuation">)</span>
      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
        res<span class="token punctuation">[</span>newKey<span class="token punctuation">]</span> <span class="token operator">=</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
  <span class="token function">handler</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
  <span class="token keyword">return</span> res
<span class="token punctuation">&#125;</span></code></pre>

<h5 id="updateValByChainKey"><a href="#updateValByChainKey" class="headerlink" title="updateValByChainKey"></a>updateValByChainKey</h5><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// æ ¹æ®é“¾å¼çš„ keyï¼Œæ›´æ–°å¯¹è±¡ä¸­å¯¹åº”å±æ€§çš„å€¼</span>
<span class="token keyword">function</span> <span class="token function">updateValByChainKey</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> keys<span class="token punctuation">,</span> val</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">const</span> seqs <span class="token operator">=</span> keys<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>seqs<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    obj<span class="token punctuation">[</span>keys<span class="token punctuation">]</span> <span class="token operator">=</span> val
  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> seqs<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">const</span> key <span class="token operator">=</span> seqs<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">!==</span> seqs<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        obj <span class="token operator">=</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
        obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> val
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h5 id="genOtherTypeValue"><a href="#genOtherTypeValue" class="headerlink" title="genOtherTypeValue"></a>genOtherTypeValue</h5><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// æ ¹æ®å½“å‰ç±»å‹ç”Ÿæˆå…¶ä»–ç±»å‹çš„å€¼</span>
<span class="token keyword">function</span> <span class="token function">genOtherTypeValue</span><span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">genRandomInteger</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">max<span class="token punctuation">,</span> min <span class="token operator">=</span> <span class="token number">0</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> max<span class="token punctuation">)</span> <span class="token operator">+</span> min
  <span class="token keyword">const</span> ops <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    <span class="token function">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0.5</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token function">Boolean</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">return</span> <span class="token function">genRandomInteger</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token function">Number</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">const</span> len <span class="token operator">=</span> <span class="token function">genRandomInteger</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>len<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span><span class="token function">genRandomInteger</span><span class="token punctuation">(</span><span class="token number">26</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">97</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">const</span> len <span class="token operator">=</span> <span class="token function">genRandomInteger</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>len<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">genRandomInteger</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
  <span class="token keyword">return</span> ops<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span></code></pre>

<h5 id="getPropRowsFromJSON"><a href="#getPropRowsFromJSON" class="headerlink" title="getPropRowsFromJSON"></a>getPropRowsFromJSON</h5><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// è·å–å¯¹è±¡è½¬æˆ JSON ä¸²åï¼Œå„ä¸ªå±æ€§å¯¹åº”çš„è¡ŒåŒºé—´</span>
<span class="token keyword">function</span> <span class="token function">getPropRowsFromJSON</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token function-variable function">stringify</span> <span class="token operator">=</span> <span class="token parameter">v</span> <span class="token operator">=></span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">const</span> flattenedObj <span class="token operator">=</span> <span class="token function">flattenObj</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
  <span class="token keyword">const</span> objJson <span class="token operator">=</span> <span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
  <span class="token keyword">const</span> objJsonArr <span class="token operator">=</span> objJson<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> propStack <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">const</span> spaceStack <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
  <span class="token keyword">const</span> rowObj <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> objJsonArr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">const</span> text <span class="token operator">=</span> objJsonArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
    <span class="token keyword">const</span> propName <span class="token operator">=</span> <span class="token function">getPropName</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span>
    <span class="token keyword">const</span> countSpace <span class="token operator">=</span> <span class="token function">countOfStartSpace</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span>
    <span class="token comment">// ä¸‹é’»å±‚çº§</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>countSpace <span class="token operator">></span> spaceStack<span class="token punctuation">[</span>spaceStack<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      spaceStack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>countSpace<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>propName<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token comment">// ä¸Šä¸€å±‚çº§ç»“æŸ</span>
      <span class="token keyword">while</span> <span class="token punctuation">(</span>spaceStack<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> spaceStack<span class="token punctuation">[</span>spaceStack<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">>=</span> countSpace<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        spaceStack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        propStack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">&#125;</span>
      spaceStack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>countSpace<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
      rowObj<span class="token punctuation">[</span>propStack<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> i
      <span class="token keyword">const</span> key <span class="token operator">=</span> propStack<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        rowObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
        rowObj<span class="token punctuation">[</span>propStack<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>propName<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      propStack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>propName<span class="token punctuation">)</span>
      <span class="token keyword">const</span> key <span class="token operator">=</span> propStack<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>flattenedObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>flattenedObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
          rowObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> flattenedObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span>
          i <span class="token operator">+=</span> flattenedObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token number">1</span>
        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
          rowObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span>
        <span class="token punctuation">&#125;</span>
      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
        rowObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> rowObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token keyword">return</span> rowObj

  <span class="token comment">// å­—ç¬¦ä¸²å¼€å¤´ç©ºæ ¼çš„æ•°é‡</span>
  <span class="token keyword">function</span> <span class="token function">countOfStartSpace</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> str<span class="token punctuation">.</span>length <span class="token operator">-</span> str<span class="token punctuation">.</span><span class="token function">trimStart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length
  <span class="token punctuation">&#125;</span>

  <span class="token comment">// è·å–å±æ€§å</span>
  <span class="token keyword">function</span> <span class="token function">getPropName</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\s+\"([^"]+)":</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> res <span class="token operator">?</span> res<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token string">""</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>


</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><a class="button is-default" href="/2f85891a5103.html" title="VueMixinsLoaderï¼šç±»ä¼¼ Mixin åŠŸèƒ½çš„ LoaderğŸ¦‰"><i class="iconfont icon-prev mr-2 has-text-grey"></i><span class="has-text-weight-semibold">ä¸Šä¸€é¡µ: VueMixinsLoaderï¼šç±»ä¼¼ Mixin åŠŸèƒ½çš„ LoaderğŸ¦‰</span></a><a class="button is-default" href="/95404f938c1c.html" title="ç»™ ViewDesign åŠ ä¸ªä¸»é¢˜æ¢è‚¤ğŸ’– &lt;W16&gt;"><span class="has-text-weight-semibold">ä¸‹ä¸€é¡µ: ç»™ ViewDesign åŠ ä¸ªä¸»é¢˜æ¢è‚¤ğŸ’– &lt;W16&gt;</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section><article class="mt-6 comment-container"><script async repo="showlotus/showlotus" src="https://utteranc.es/client.js" issue-term="pathname" theme="preferred-color-scheme"></script></article></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><!-- TODO é…ç½®ä¸ªäººç½‘ç«™é“¾æ¥--><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/showlotus"><i class="iconfont icon-github"></i></a><!-- Gitee--><!-- Ins--><!-- RSS--><!-- çŸ¥ä¹--><!-- é¢†è‹±--><!-- è„¸ä¹¦--></section><p><span>Copyright Â©</span><span> showlotus 2026</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"></div><div><span></span></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/post.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@2.1.4/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js"></script><script src="/js/clipboard_use.js"></script><script src="/js/codepen.io.js"></script></body></html>
<!DOCTYPE html><html class="appearance-light" lang="zh-CN"><head><meta charset="UTF-8"><title>Vueï¼šbeforeCreate -&gt; created &lt;W8&gt;</title><meta name="description" content="I hope one day, everyone is using my program."><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><!-- Google Analytics --><!-- End Google Analytics -->
<!-- Baidu Analytics --><!-- End Baidu Analytics --><link rel="icon" href="/images/favicon.png"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><script src="/js/highlight.pack.js"></script><meta name="description" content="


å¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒVue åœ¨ beforeCreate -&amp;gt; created é˜¶æ®µï¼ŒæŒ‰è¿™ä¸ªæ­¥éª¤è¿›è¡Œåˆå§‹åŒ–æ“ä½œã€‚æŒ‰ç…§è¿™ä¸ªé¡ºåºï¼Œä¹Ÿå°±æ„å‘³ç€åè€…åˆå§‹åŒ–çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨å‰è€…å·²ç»åˆå§‹åŒ–çš„å˜é‡ã€‚ä¾‹å¦‚ï¼šåœ¨ data ä¸­å¯ä»¥ä½¿ç”¨ methods é‡Œå®šä¹‰çš„æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ç”¨ props å¼•å…¥çš„å±æ€§è¿›è¡Œåˆå§‹åŒ–ã€‚

initInjectionsinject çš„ä½¿ç”¨è¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚

å…ˆè·å–å½“å‰å®ä¾‹ä¸Šæ³¨å†Œçš„ injectï¼Œè¯»å–æ¯ä¸€ä¸ª keyï¼›

ç„¶åè‡ªåº•å‘ä¸Šä¸æ–­å¾ªç¯è·å–çˆ¶ç»„ä»¶çš„ provide ä¸­æ˜¯å¦æœ‰æä¾›è¯¥ keyï¼š
// è‡ªåº•å‘ä¸Šå¾ªç¯ï¼Œè·å–çˆ¶ç»„ä»¶çš„ provide
let curr = this
while (curr) &amp;#123;
  if (curr.provide &amp;amp;&amp;amp; key in curr.pro.."><meta name="generator" content="Hexo 5.4.2"></head><body class="is-flex is-flex-direction-column"><header class="header-widget is-flex-shrink-0 is-hidden-mobile"><div class="container is-fullhd is-flex is-justify-content-space-between is-align-items-center is-full-height"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">showlotus's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">Vueï¼šbeforeCreate -&gt; created &lt;W8&gt;</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">ç‚¹å‡»è¿”å›é¡¶éƒ¨</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">é¦–é¡µ</a></h3><h3 class="is-inline-block"><a href="/archives">å½’æ¡£</a></h3></aside></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">é¦–é¡µ</a></h3><h3 class="is-inline-block"><a href="/archives">å½’æ¡£</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#initInjections"><span class="toc-text">initInjections</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#initState"><span class="toc-text">initState</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#initProps"><span class="toc-text">initProps</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#initMethods"><span class="toc-text">initMethods</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#initData"><span class="toc-text">initData</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#initComputed"><span class="toc-text">initComputed</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#initWatch"><span class="toc-text">initWatch</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#initProvide"><span class="toc-text">initProvide</span></a></li></ol></div><div class="column is-9"><header class="my-4"><a href="/tags/Vue"><i class="tag post-item-tag">Vue</i></a><a href="/tags/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA-Vue-js"><i class="tag post-item-tag">æ·±å…¥æµ…å‡º Vue js</i></a><a href="/tags/%E6%BA%90%E7%A0%81"><i class="tag post-item-tag">æºç </i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">Vueï¼šbeforeCreate -&gt; created &lt;W8&gt;</h1><time class="has-text-grey custom-date-font" datetime="2022-10-22T15:21:59.000Z">2022/10/22 15:21</time><article class="mt-2 post-content"><img src="/9cc2e610b92e/banner.png" class="">

<blockquote>
<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒVue åœ¨ <code>beforeCreate -&gt; created</code> é˜¶æ®µï¼ŒæŒ‰è¿™ä¸ªæ­¥éª¤è¿›è¡Œåˆå§‹åŒ–æ“ä½œã€‚æŒ‰ç…§è¿™ä¸ªé¡ºåºï¼Œä¹Ÿå°±æ„å‘³ç€åè€…åˆå§‹åŒ–çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨å‰è€…å·²ç»åˆå§‹åŒ–çš„å˜é‡ã€‚ä¾‹å¦‚ï¼šåœ¨ <code>data</code> ä¸­å¯ä»¥ä½¿ç”¨ <code>methods</code> é‡Œå®šä¹‰çš„æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ç”¨ <code>props</code> å¼•å…¥çš„å±æ€§è¿›è¡Œåˆå§‹åŒ–ã€‚</p>
</blockquote>
<h2 id="initInjections"><a href="#initInjections" class="headerlink" title="initInjections"></a>initInjections</h2><p><em><code>inject</code> çš„ä½¿ç”¨è¯·å‚è€ƒ<a target="_blank" rel="noopener" href="https://v2.cn.vuejs.org/v2/api/#provide-inject">å®˜æ–¹æ–‡æ¡£</a>ã€‚</em></p>
<ul>
<li><p>å…ˆè·å–å½“å‰å®ä¾‹ä¸Šæ³¨å†Œçš„ <code>inject</code>ï¼Œè¯»å–æ¯ä¸€ä¸ª <code>key</code>ï¼›</p>
</li>
<li><p>ç„¶åè‡ªåº•å‘ä¸Šä¸æ–­å¾ªç¯è·å–çˆ¶ç»„ä»¶çš„ <code>provide</code> ä¸­æ˜¯å¦æœ‰æä¾›è¯¥ <code>key</code>ï¼š</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// è‡ªåº•å‘ä¸Šå¾ªç¯ï¼Œè·å–çˆ¶ç»„ä»¶çš„ provide</span>
<span class="token keyword">let</span> curr <span class="token operator">=</span> <span class="token keyword">this</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span>curr<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>curr<span class="token punctuation">.</span>provide <span class="token operator">&amp;&amp;</span> key <span class="token keyword">in</span> curr<span class="token punctuation">.</span>provide<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// ...</span>
    <span class="token keyword">break</span>
  <span class="token punctuation">&#125;</span>
  curr <span class="token operator">=</span> curr<span class="token punctuation">.</span>$parent
<span class="token punctuation">&#125;</span></code></pre>

<ul>
<li>è‹¥æ‰¾åˆ°äº†ï¼Œåˆ™è·³å‡ºå¾ªç¯ï¼Œå¹¶è¿”å›ç»“æœï¼›</li>
<li>è‹¥æœªæ‰¾åˆ°ï¼Œåˆ™ä½¿ç”¨é…ç½®çš„é»˜è®¤å€¼ <code>default</code>ï¼›</li>
<li>ç‰¹æ®Šçš„ï¼Œå¯¹äº <code>default</code> ä¸º <code>function</code> ç±»å‹ï¼ˆéåŸå§‹å€¼çš„é»˜è®¤å€¼ï¼‰ï¼Œåˆ™ä¼šå°†è¯¥æ–¹æ³•é€šè¿‡ <code>call</code> ä¿®æ”¹ <code>this</code> ä¸ºå½“å‰å®ä¾‹åï¼Œå†å°†æ‰§è¡Œç»“æœè¿”å›ï¼›</li>
<li>å¦‚æœæ—¢æ²¡æ‰¾åˆ°ï¼Œä¹Ÿæ²¡è®¾ç½® <code>default</code>ï¼Œåˆ™æŠ›å‡ºä¸€ä¸ª <code>éç”Ÿäº§è­¦å‘Š</code>ã€‚</li>
</ul>
<b>
</li>
<li><p>ç„¶åå¯¹äºæ”¶é›†åˆ°çš„ç»“æœï¼Œä¼šéå†æ¯ä¸€ä¸ª <code>key</code>ï¼Œç„¶åé€šè¿‡ <code>defineReactive</code> æ³¨å†Œåˆ°å½“å‰å®ä¾‹ä¸Šï¼Œè€Œåœ¨ <code>defineReactive</code> å‰ä¼šæœ‰ä¸€ä¸ª â€œå–æ¶ˆå“åº”å¼â€ çš„æ“ä½œï¼š</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">observerState<span class="token punctuation">.</span>shouldConvert <span class="token operator">=</span> <span class="token boolean">false</span></code></pre>

<p>è¿™ä¸€æ­¥å°±æ˜¯é€šçŸ¥ <code>defineReactive</code> ä¸è¦å°†æ¥ä¸‹æ¥æŒ‚è½½çš„æ•°æ®è½¬æ¢æˆå“åº”å¼æ•°æ®ï¼Œè¿™ä¹Ÿå°±å°è¯äº†å®˜æ–¹è¯´çš„ <code>inject</code> æ³¨å…¥çš„å†…å®¹ä¸æ˜¯å“åº”å¼æ•°æ®ã€‚å…¶å®å°±æ˜¯æŠŠæä¾›çš„ <code>provide</code> çš„å†…å®¹åœ¨å¼•å…¥ <code>inject</code> çš„å®ä¾‹ä¸Šï¼Œé‡æ–°å¤åˆ¶äº†ä¸€ä»½ã€‚å¦‚æœæ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œåªæ˜¯å€¼å¤åˆ¶ï¼Œé‚£ä¹ˆè‡ªç„¶è€Œç„¶ä¸æ˜¯å“åº”å¼æ•°æ®ï¼Œä½†æ˜¯å¦‚æœæ˜¯å¼•ç”¨ç±»å‹ï¼Œè¿˜æ˜¯å¼•ç”¨çš„åŒä¸€ä¸ªåœ°å€ï¼Œå¦‚æœæºæ•°æ®æ˜¯å“åº”å¼çš„ï¼Œé‚£ä¹ˆ <code>inject</code> å¼•å…¥çš„ä¹Ÿæ˜¯å“åº”å¼æ•°æ®ã€‚</p>
<p>å¦‚æœæƒ³å®ç°åŸºç¡€æ•°æ®ç±»å‹çš„å“åº”å¼å‘¢ï¼Ÿæ¢ä¸ªè§’åº¦ï¼Œå¦‚æœæˆ‘ä»¬æŠŠ <code>provide</code> æä¾›çš„å±æ€§çš„ <code>this</code> ç»‘å®šåœ¨åŸå®ä¾‹ä¸Šï¼Œé‚£ä¹ˆæ˜¯å¦å°±èƒ½é€šè¿‡åŸå®ä¾‹çš„ <code>this</code> è®¿é—®åˆ°åŸå®ä¾‹ä¸Šçš„ä¸€äº›å“åº”å¼çš„æ•°æ®ï¼Ÿé‚£ä¹ˆ <code>inject</code> æ³¨å…¥çš„å†…å®¹æ˜¯ä¸æ˜¯å°±æ˜¯å“åº”å¼çš„å‘¢ï¼Ÿ</p>
<p>çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p>
<b>

<ul>
<li><p>çˆ¶ç»„ä»¶</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// parent</span>
<span class="token operator">&lt;</span>template<span class="token operator">></span>
  <span class="token operator">&lt;</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span>input v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"msg"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>input<span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span>

<span class="token operator">&lt;</span>script<span class="token operator">></span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
  <span class="token function">provide</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
      <span class="token function-variable function">getMsg</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span>msg<span class="token punctuation">,</span>
      <span class="token function">getMsg2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>msg <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">getMsg3</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>getMsg3<span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
      <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">"parent msg"</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre>

<b>
</li>
<li><p>å­ç»„ä»¶</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// child</span>
<span class="token operator">&lt;</span>template<span class="token operator">></span>
  <span class="token operator">&lt;</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span>p<span class="token operator">></span>getMsg<span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> msg1 <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>
    <span class="token operator">&lt;</span>p<span class="token operator">></span>getMsg2<span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> msg2 <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>
    <span class="token operator">&lt;</span>p<span class="token operator">></span>getMsg3<span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> msg3 <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span>

<span class="token operator">&lt;</span>script<span class="token operator">></span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
  <span class="token literal-property property">inject</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"getMsg"</span><span class="token punctuation">,</span> <span class="token string">"getMsg2"</span><span class="token punctuation">,</span> <span class="token string">"getMsg3"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token function">msg1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token function">msg2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getMsg2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token function">msg3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getMsg3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre></li>
</ul>
</li>
</ul>
<p>å­ç»„ä»¶ä¸­çš„ <code>msg1</code> å’Œ <code>msg3</code> æ˜¯å“åº”å¼çš„ï¼Œè€Œ <code>msg2</code> ä¸ºç©ºï¼ˆ<code>&quot;&quot;</code>ï¼‰ã€‚è¿™å…¶å®å°±æ˜¯ <code>this</code> æŒ‡å‘çš„é—®é¢˜ï¼š</p>
<ul>
<li><code>msg1</code>ï¼šç®­å¤´å‡½æ•°çš„ <code>this</code> æ˜¯ç”±åˆ›å»ºæ—¶çš„ç¯å¢ƒå†³å®šçš„ï¼Œä¹Ÿå³ <code>this == ParentVm(çˆ¶ç»„ä»¶å®ä¾‹)</code>ï¼Œæ‰€ä»¥ <code>getMsg() == &quot;parent msg&quot;</code>ã€‚</li>
<li><code>msg2</code>ï¼šæ­£å¸¸çš„å‡½æ•°è°ƒç”¨çš„ <code>this</code> ç”±å½“å‰çš„æ‰§è¡Œç¯å¢ƒå†³å®šï¼Œä¹Ÿå³ <code>this == ChildVm(å­ç»„ä»¶å®ä¾‹)</code>ï¼Œå› ä¸ºå­ç»„ä»¶ä¸Šæ²¡æœ‰å®šä¹‰ <code>msg</code>ï¼Œæ‰€ä»¥ <code>getMsg2() == undefined</code>ï¼Œé€šè¿‡ <code>&#123;&#123;&#125;&#125;</code> æ¸²æŸ“åˆ°é¡µé¢ä¸Šå°±æ˜¯ <code>&quot;&quot;(ç©ºå­—ç¬¦ä¸²)</code>ã€‚</li>
<li><code>msg3</code>ï¼šæ ¹æ®ç»“æœè®ºï¼Œ<code>getMsg</code> å’Œ <code>getMsg3</code> çš„ <code>this</code> éƒ½æŒ‡å‘ <code>ParentVm</code>ï¼Œè¿™é‡Œå°±æ¶‰åŠåˆ° <code>methods</code> çš„åˆå§‹åŒ–äº†ï¼Œåœ¨ä¸‹é¢ <code>initMethods</code> ç« èŠ‚é‡Œä¼šæœ‰è¯¦ç»†è¯´æ˜ã€‚</li>
</ul>
<h2 id="initState"><a href="#initState" class="headerlink" title="initState"></a>initState</h2><h3 id="initProps"><a href="#initProps" class="headerlink" title="initProps"></a>initProps</h3><p><em><code>props</code> çš„ä½¿ç”¨è¯·å‚è€ƒ<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/components-props.html">å®˜æ–¹æ–‡æ¡£</a>ã€‚</em></p>
<ul>
<li><p>åœ¨è§£ææ¨¡æ¿ç”Ÿæˆ render å‡½æ•°çš„é˜¶æ®µï¼Œä¼šå°†è§£æåˆ°çš„ <code>props</code> æ•°æ®ä¼ é€’ç»™å­ç»„ä»¶ï¼Œåœ¨å­ç»„ä»¶ä¸­ä½¿ç”¨ <code>props</code> ä¸­çš„å‚æ•°ï¼Œä¼šè§¦å‘å¯¹åº”å‚æ•°çš„ <code>getter</code>ï¼Œç„¶åå°†å­ç»„ä»¶ä¸­å¯¹åº”çš„ <code>Watcher</code> æ”¾å…¥å½“å‰å‚æ•°çš„ä¾èµ–ä¸­ï¼Œä»è€Œå®ç°åœ¨çˆ¶ç»„ä»¶æ›´æ–°å€¼åï¼Œå­ç»„ä»¶ä¹Ÿä¼šåŒæ­¥æ›´æ–°ã€‚</p>
</li>
<li><p>åœ¨çˆ¶ç»„ä»¶æ¨¡æ¿ä¸­ç»™å­ç»„ä»¶ä¼ é€’å±æ€§ï¼Œæ—¢å¯ä»¥ä»¥çŸ­æ çš„å½¢å¼ <code>user-name</code>ï¼Œä¹Ÿå¯ä»¥ç”¨å°é©¼å³°çš„å½¢å¼ <code>userName</code>ï¼Œä¸è¿‡åœ¨å­ç»„ä»¶ä¸­æ³¨å†Œåˆ° <code>props</code> ä¸­ï¼Œåªèƒ½ä»¥ <code>userName</code> çš„å½¢å¼æ¥æ”¶ã€‚</p>
</li>
<li><p>åªæœ‰åœ¨å½“å‰æ˜¯æ ¹ç»„ä»¶æ—¶ï¼Œæ‰ä¼šå°† <code>props</code> ä¸­çš„æ•°æ®è½¬æ¢ä¸ºå“åº”å¼æ•°æ®ã€‚å› ä¸ºä»çˆ¶ç»„ä»¶ä¼ å…¥çš„ <code>props</code> éƒ½å·²ç»åœ¨çˆ¶ç»„ä»¶ä¸­å®šä¹‰æˆå“åº”å¼äº†ï¼Œå­ç»„ä»¶åªæ˜¯å¼•å…¥ï¼Œå¹¶åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œå†å¾€ <code>props</code> é‡Œæ·»åŠ å¯¹åº”çš„ä¾èµ–ï¼Œæ‰€ä»¥ä¸éœ€è¦è½¬ä¸ºå“åº”å¼ã€‚ç‰¹æ®Šçš„ï¼Œå¯¹äºçˆ¶ç»„ä»¶æ²¡æœ‰æä¾›ï¼Œä¸”å®šä¹‰äº† <code>default</code> çš„ <code>prop</code>ï¼Œéœ€è¦å°†é»˜è®¤å€¼è½¬ä¸ºå“åº”å¼ã€‚</p>
</li>
<li><p><code>Boolean</code> ç±»å‹ <code>prop</code> çš„å¤„ç†ï¼šä»¥ä¸‹å››ç§æƒ…å†µéƒ½ä¼šå°†å­ç»„ä»¶çš„ <code>prop</code> è®¾ç½®ä¸º <code>true</code>ï¼š</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>child name <span class="token operator">/</span><span class="token operator">></span>
<span class="token operator">&lt;</span>child name<span class="token operator">=</span><span class="token string">"name"</span> <span class="token operator">/</span><span class="token operator">></span>
<span class="token operator">&lt;</span>child userName<span class="token operator">=</span><span class="token string">"user-name"</span> <span class="token operator">/</span><span class="token operator">></span>
<span class="token operator">&lt;</span>child user<span class="token operator">-</span>name<span class="token operator">=</span><span class="token string">"user-name"</span> <span class="token operator">/</span><span class="token operator">></span></code></pre>

<p>æ¯”å¯¹æ—¶ï¼Œä¼šå°† <code>key</code> è¿›è¡Œé©¼å³°è½¬åŒ–ï¼Œå³ <code>userName -&gt; user-name</code>ï¼Œå¦‚æœä¸æä¾›çš„å€¼ç›¸ç­‰ï¼Œé‚£ä¹ˆä¹Ÿè®¾ç½®ä¸º <code>true</code>ã€‚</p>
</li>
<li><p>æœ€åï¼Œéå† <code>props</code> ä¸­çš„æ¯ä¸€é¡¹ï¼Œç„¶åå°†ä¸åœ¨å½“å‰ <code>vm</code> å®ä¾‹ä¸Šçš„ï¼Œè®¾ç½®ä¸€å±‚ä»£ç†ï¼Œç„¶åæŒ‚è½½åœ¨ <code>vm</code> å®ä¾‹ä¸Šã€‚</p>
</li>
</ul>
<h3 id="initMethods"><a href="#initMethods" class="headerlink" title="initMethods"></a>initMethods</h3><ul>
<li>éå† <code>$options.methods</code>ï¼Œå…ˆæ£€éªŒæ˜¯å¦æœ‰ä¸ <code>props</code> ä¸­çš„æœ‰é‡å¤çš„ï¼Œå¦‚æœæœ‰ï¼Œåˆ™æŠ›å‡ºä¸€ä¸ª <code>éç”Ÿäº§è­¦å‘Š</code>ã€‚æ³¨æ„è¿™åªæ˜¯ä¸€ä¸ªè­¦å‘Šï¼Œå¦‚æœæ²¡æœ‰ä¿®æ­£ï¼Œé‚£ä¹ˆä¾ç„¶è¿˜ä¼šå°†å½“å‰ <code>methods</code> æŒ‚è½½åœ¨å½“å‰å®ä¾‹ä¸Šï¼ˆä¹Ÿå³ï¼Œå¦‚æœæŸä¸€ä¸ª <code>key</code> åŒæ—¶å­˜åœ¨äº <code>props</code> å’Œ <code>methods</code> ä¸Šï¼Œé‚£ä¹ˆæœ€åä½¿ç”¨æ—¶ï¼Œä½¿ç”¨çš„æ˜¯ <code>methods</code> ä¸Šçš„ï¼‰ã€‚</li>
<li>æŒ‚è½½æ—¶ä¼šé€šè¿‡ <code>bind</code> ä¿®æ”¹ <code>methods</code> çš„ <code>this</code> ä¸ºå½“å‰å®ä¾‹ã€‚</li>
</ul>
<h3 id="initData"><a href="#initData" class="headerlink" title="initData"></a>initData</h3><ul>
<li><p>ç‰¹æ®Šçš„ï¼Œ<code>data</code> å¿…é¡»æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªè¿”å›å¯¹è±¡çš„å‡½æ•°ã€‚</p>
</li>
<li><p>éå† <code>data</code> çš„æ ¡éªŒé˜¶æ®µï¼š</p>
<ul>
<li>å…ˆåˆ¤æ–­ï¼Œå¦‚æœå±æ€§å·²å­˜åœ¨äº <code>methods</code> ä¸­ï¼Œåˆ™æŠ›å‡ºä¸€ä¸ª <code>éç”Ÿäº§è­¦å‘Š</code>ï¼›</li>
<li>å†åˆ¤æ–­ï¼Œå¦‚æœå±æ€§å·²å­˜åœ¨äº <code>props</code> ä¸­ï¼ŒæŠ›å‡ºä¸€ä¸ª <code>éç”Ÿäº§è­¦å‘Š</code>ï¼Œä½†æ˜¯ä¸ä¼šæŒ‚è½½ï¼Œåªæœ‰å½“å‰å±æ€§ä¸ä»¥ <code>$</code> æˆ– <code>_</code> å¼€å¤´æ—¶ï¼Œæ‰ä¼šä»£ç†åˆ°å®ä¾‹ä¸Šã€‚</li>
</ul>
</li>
</ul>
<blockquote><p>Vue å†…éƒ¨ä½¿ç”¨çš„ä»£ç†æ–¹æ³•</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">noop</span> <span class="token operator">=</span> <span class="token parameter">_</span> <span class="token operator">=></span> _
<span class="token keyword">const</span> sharePropertyDefinition <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  <span class="token literal-property property">enumerable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">configurable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">get</span><span class="token operator">:</span> noop<span class="token punctuation">,</span>
  <span class="token literal-property property">set</span><span class="token operator">:</span> noop
<span class="token punctuation">&#125;</span>

<span class="token keyword">function</span> <span class="token function">proxy</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> sourceKey<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  sharePropertyDefinition<span class="token punctuation">.</span><span class="token function-variable function">get</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">proxyGetter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">[</span>sourceKey<span class="token punctuation">]</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span>
  <span class="token punctuation">&#125;</span>

  sharePropertyDefinition<span class="token punctuation">.</span><span class="token function-variable function">set</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">proxySetter</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">this</span><span class="token punctuation">[</span>sourceKey<span class="token punctuation">]</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> val
  <span class="token punctuation">&#125;</span>

  Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> sharePropertyDefinition<span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span></code></pre>
</blockquote>

<h3 id="initComputed"><a href="#initComputed" class="headerlink" title="initComputed"></a>initComputed</h3><p><em><code>computed</code> çš„ä½¿ç”¨è¯·å‚è€ƒ<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/computed.html#%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7">å®˜æ–¹æ–‡æ¡£</a>ã€‚</em></p>
<ul>
<li>å…ˆæ£€éªŒï¼Œå¦‚æœå½“å‰çš„å±æ€§åå·²å­˜åœ¨ <code>vm</code> ä¸Šï¼Œåˆ™ä¸ä¼šå¤„ç†è¿™ä¸ªå±æ€§ã€‚</li>
<li>æ”¶é›†å½“å‰ <code>getter</code> ä¸­æ‰€æœ‰ç”¨åˆ°çš„å±æ€§çš„ä¾èµ–ï¼Œå½“è¿™äº›å±æ€§å˜åŒ–æ—¶ï¼Œé€šçŸ¥ <code>computed Watcher</code> å»æ›´æ–°ã€‚</li>
</ul>
<blockquote><p>åœ¨ 18 å¹´æœ‰äººæäº†ä¸€ä¸ª <em>Issue</em> ï¼š<code>computed</code> ä¾èµ–çš„å€¼å‘ç”Ÿäº†å˜åŒ–ï¼Œä½† <code>computed</code> çš„å€¼æ²¡æœ‰æ”¹å˜ï¼Œä»ç„¶ä¼šè§¦å‘ <code>render</code>ã€‚å®˜æ–¹è™½ç„¶åœ¨åç»­ä¹Ÿé‡æ–°è§£å†³äº†ï¼Œä¸è¿‡æˆ‘æœ€è¿‘ç”¨æœ€æ–°ç‰ˆçš„ <em>Vue2.7</em> è¯•äº†è¯•ï¼Œè²Œä¼¼è¿˜å­˜åœ¨è¿™ä¸ªé—®é¢˜ï¼ˆ<a target="_blank" rel="noopener" href="https://codepen.io/olderk/pen/XWqvyKV">æˆ³è¿™é‡Œ</a>ï¼‰ã€‚</p>
</blockquote>

<p>ç²—ç•¥åœ°çœ‹äº†çœ‹ï¼Œå°è¯•è§£é‡Šä¸€ä¸‹ã€‚æ¯”å¦‚ä¸‹é¢è¿™ä¸ªï¼š<em>sum</em> ä¾èµ–äº <em>a</em> å’Œ <em>b</em> ï¼Œå…¶ä¸­ <em>sum</em> çš„ <em>Watcher</em> æœ‰ä¸€ä¸ªï¼š<code>render Watcher</code>ï¼ŒæŒ‰ç†è¯´ <em>a</em> å’Œ <em>b</em> çš„ <em>Watcher</em> åº”è¯¥åªæœ‰ä¸€ä¸ª <code>computed Watcher</code>ï¼Œé‚£å°±æ˜¯å½“ <em>a</em> æˆ– <em>b</em> å‘ç”Ÿå˜åŒ–åï¼Œé€šçŸ¥è®¡ç®—å±æ€§ <em>sum</em> é‡æ–°è®¡ç®—ï¼Œä½†æ˜¯è¿™æ ·æ— æ³•é€šçŸ¥ <em>sum</em> çš„ <em>Watcher</em> å»æ›´æ–°ã€‚æ‰€ä»¥ <em>sum</em> çš„æ¯ä¸ªä¾èµ–é‡Œéƒ½ä¼šæŠŠ <em>sum</em> çš„ <em>Watcher</em> å­˜ä¸€ä»½ï¼Œä¹Ÿå³ <em>a</em> å’Œ <em>b</em> çš„ <em>Watcher</em> é‡Œè¿˜æœ‰ä¸€ä»½ <code>render Watcher</code>ã€‚ç„¶åå°±å¯¼è‡´ï¼Œå°±ç®— <em>a</em> å’Œ <em>b</em> çš„å€¼åŒæ—¶æ”¹å˜äº†ï¼Œä½†æ˜¯ <em>sum</em> çš„ç»“æœæ²¡å˜ï¼Œè¿˜æ˜¯ä¼šè§¦å‘ <code>render Watcher</code>ï¼Œé‡æ–°æ‰§è¡Œä¸€æ¬¡ <em>render</em> ã€‚è™½ç„¶åœ¨ <em>diff</em> é˜¶æ®µï¼Œæœ€æ–°çš„ä¸€æ¬¡ <em>render</em> æ²¡æœ‰ä»»ä½•å˜åŒ–ï¼Œä½†è¿˜æ˜¯ä¼šé€ æˆæ€§èƒ½çš„æµªè´¹ã€‚ï¼ˆä¸ªäººæ„šè§å“ˆ ğŸ˜‚ï¼‰</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">></span>
  <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> sum <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span>
<span class="token operator">&lt;</span>script<span class="token operator">></span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
  <span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>b
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre>

<h3 id="initWatch"><a href="#initWatch" class="headerlink" title="initWatch"></a>initWatch</h3><p><em><code>watch</code> çš„ä½¿ç”¨è¯·å‚è€ƒ<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/computed.html#%E4%BE%A6%E5%90%AC%E5%99%A8">å®˜æ–¹æ–‡æ¡£</a>ã€‚</em></p>
<p>åˆå§‹åŒ–æ—¶ï¼Œåˆ›å»º <code>Watcher</code> ä¸ <code>$watch</code> ä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªæ–¹æ³•ã€‚å‚æ•°ç±»å‹å¯ä»¥ä¸º <code>String</code>ã€<code>Function</code>ã€<code>Object</code> å’Œ <code>Array</code> è¿™å››ç§ç±»å‹ã€‚</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token literal-property property">watch</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
  <span class="token function-variable function">a</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">newVal<span class="token punctuation">,</span> oldVal</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token string">'handlerWatchB'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token function">handler</span><span class="token punctuation">(</span><span class="token parameter">newVal<span class="token punctuation">,</span> oldVal</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">deep</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">immediate</span><span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">d</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">function</span> <span class="token function">handlerWatchD1</span><span class="token punctuation">(</span><span class="token parameter">newVal<span class="token punctuation">,</span> oldVal</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span> <span class="token function">handlerWatchD2</span><span class="token punctuation">(</span><span class="token parameter">newVal<span class="token punctuation">,</span> oldVal</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>é‰´äºå‚æ•°çš„ç‰¹æ®Šæ€§ï¼Œéœ€è¦å¯¹ç±»å‹ä¸º <code>Array</code> çš„ç‰¹æ®Šå¤„ç†ï¼Œæ‰¹é‡åˆ›å»º <code>Watcher</code>ã€‚</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// åˆ›å»º Watcher</span>
<span class="token keyword">function</span> <span class="token function">createWatcher</span><span class="token punctuation">(</span><span class="token parameter">vm<span class="token punctuation">,</span> expOrFn<span class="token punctuation">,</span> handler<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isPlainObject</span><span class="token punctuation">(</span>handler<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    options <span class="token operator">=</span> handler
    handler <span class="token operator">=</span> handler<span class="token punctuation">.</span>handler
  <span class="token punctuation">&#125;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> handler <span class="token operator">===</span> <span class="token string">"string"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    handler <span class="token operator">=</span> vm<span class="token punctuation">[</span>handler<span class="token punctuation">]</span>
  <span class="token punctuation">&#125;</span>
  <span class="token keyword">return</span> vm<span class="token punctuation">.</span><span class="token function">$watch</span><span class="token punctuation">(</span>expOrFn<span class="token punctuation">,</span> handler<span class="token punctuation">,</span> options<span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span></code></pre>

<h2 id="initProvide"><a href="#initProvide" class="headerlink" title="initProvide"></a>initProvide</h2><p><em><code>provide</code> çš„ä½¿ç”¨è¯·å‚è€ƒ<a target="_blank" rel="noopener" href="https://v2.cn.vuejs.org/v2/api/#provide-inject">å®˜æ–¹æ–‡æ¡£</a>ã€‚</em></p>
<ul>
<li>å¦‚æœæ˜¯ <code>object</code> ç±»å‹ï¼Œåˆ™ç›´æ¥æŒ‚è½½åœ¨å½“å‰å®ä¾‹ä¸Šï¼›</li>
<li>å¦‚æœæ˜¯ <code>function</code> ç±»å‹ï¼Œåˆ™é€šè¿‡ <code>call</code> ä¿®æ”¹ <code>this</code> ä¸ºå½“å‰å®ä¾‹åï¼Œå†å°†æ‰§è¡Œç»“æœè¿”å›ã€‚</li>
</ul>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><a class="button is-default" href="/039b4a276713.html" title="å¦‚ä½•å®ç°çŠ¶æ€çš„ã€Œä¼ªæ›´æ–°ã€? &lt;W9&gt;"><i class="iconfont icon-prev mr-2 has-text-grey"></i><span class="has-text-weight-semibold">ä¸Šä¸€é¡µ: å¦‚ä½•å®ç°çŠ¶æ€çš„ã€Œä¼ªæ›´æ–°ã€? &lt;W9&gt;</span></a><a class="button is-default" href="/3240137ccfb8.html" title="v-resizeï¼šç›‘å¬ DOM å°ºå¯¸å˜åŒ–"><span class="has-text-weight-semibold">ä¸‹ä¸€é¡µ: v-resizeï¼šç›‘å¬ DOM å°ºå¯¸å˜åŒ–</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section><article class="mt-6 comment-container"><script async repo="showlotus/showlotus" src="https://utteranc.es/client.js" issue-term="pathname" theme="preferred-color-scheme"></script></article></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><!-- TODO é…ç½®ä¸ªäººç½‘ç«™é“¾æ¥--><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/showlotus"><i class="iconfont icon-github"></i></a><!-- Gitee--><!-- Ins--><!-- RSS--><!-- çŸ¥ä¹--><!-- é¢†è‹±--><!-- è„¸ä¹¦--></section><p><span>Copyright Â©</span><span> showlotus 2026</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"></div><div><span></span></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/post.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@2.1.4/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js"></script><script src="/js/clipboard_use.js"></script><script src="/js/codepen.io.js"></script></body></html>
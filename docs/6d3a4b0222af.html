<!DOCTYPE html><html class="appearance-light" lang="zh-CN"><head><meta charset="UTF-8"><title>React + Antd 搭建一个词云在线生成网站</title><meta name="description" content="I hope one day, everyone is using my program."><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><!-- Google Analytics --><!-- End Google Analytics -->
<!-- Baidu Analytics --><!-- End Baidu Analytics --><link rel="icon" href="/images/favicon.png"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><script src="/js/highlight.pack.js"></script><meta name="description" content="事情的起因是，有一天，突然看到一个贼吃我颜的 UI 组件库 shadcn&amp;#x2F;ui，实在是太喜欢了 😍。

于是，打算用这个 UI 库做个东西，刚好最近要做一个词云相关的网站，起初是打算用 Vue 实现来着，但是看了看这个 UI 库不支持 Vue ，但支持 React ，但我还从未使用 React 开发过任何东西，上次学习还是 3 年前的事了。然后，我做了一个决定就用 React 来实现啦！边学习边实现！
但中途，又发现了一个问题，我想要一个多选的下拉框，但是这个 UI 库里没有，我真的是……，只能弃船转向 Antd 了。不得不说，Antd 组件的功能是真的多～
然后就一步一步开发功能，功能也不多，开发起来还算容易。中途接触到了 styled-components 用来在 React 写 CSS ，.."><meta name="generator" content="Hexo 5.4.2"></head><body class="is-flex is-flex-direction-column"><header class="header-widget is-flex-shrink-0 is-hidden-mobile"><div class="container is-fullhd is-flex is-justify-content-space-between is-align-items-center is-full-height"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">showlotus's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">React + Antd 搭建一个词云在线生成网站</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">点击返回顶部</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">首页</a></h3><h3 class="is-inline-block"><a href="/archives">归档</a></h3></aside></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">首页</a></h3><h3 class="is-inline-block"><a href="/archives">归档</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile is-hidden"></div><div class="column is-9"><header class="my-4"><a href="/tags/Antd"><i class="tag post-item-tag">Antd</i></a><a href="/tags/React"><i class="tag post-item-tag">React</i></a><a href="/tags/Redux"><i class="tag post-item-tag">Redux</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">React + Antd 搭建一个词云在线生成网站</h1><time class="has-text-grey custom-date-font" datetime="2024-01-29T22:40:36.000Z">2024/01/29 22:40</time><article class="mt-2 post-content"><p>事情的起因是，有一天，突然看到一个贼吃我颜的 <em>UI</em> 组件库 <a target="_blank" rel="noopener" href="https://ui.shadcn.com/">shadcn&#x2F;ui</a>，实在是太喜欢了 😍。</p>
<p><img src="/6d3a4b0222af/shadcn.jpg" alt="shadcn"></p>
<p>于是，打算用这个 <em>UI</em> 库做个东西，刚好最近要做一个词云相关的网站，起初是打算用 <em>Vue</em> 实现来着，但是看了看这个 <em>UI</em> 库不支持 <em>Vue</em> ，但支持 <em>React</em> ，但我还从未使用 <em>React</em> 开发过任何东西，上次学习还是 <em>3</em> 年前的事了。然后，我做了一个决定就用 <em>React</em> 来实现啦！边学习边实现！</p>
<p>但中途，又发现了一个问题，我想要一个多选的下拉框，但是这个 <em>UI</em> 库里没有，我真的是……，只能弃船转向 <em>Antd</em> 了。不得不说，<em>Antd</em> 组件的功能是真的多～</p>
<p>然后就一步一步开发功能，功能也不多，开发起来还算容易。中途接触到了 <code>styled-components</code> 用来在 <em>React</em> 写 <em>CSS</em> ，挺有意思的，而且支持动态属性传值，这点比 <em>Vue</em> 方便不少。还有就是 <em>TS</em> 的支持，<em>React</em> 的生态还是强大！开发起来实在是方便至极！</p>
<p>有一个功能需要跨组件通信，然后就去接触到了 <em>Redux</em> ，翻了翻文档，发现了好多 <em>Vuex</em> 的 “影子” ，哈哈哈。搭配官方推荐的 <em>react-redux</em> ，着实不错。然后叭，遇到一个问题，在一个组件内通过 <code>dispatch</code> 更新 <code>store</code> 中的数据，这里组件内部也用到了这个数据，就导致组件循环更新，死循环了…</p>
<p>然后，就去了解了一下 <em>React</em> 的更新机制：每当组件上的属性发生变化时，都会从当前组件开始，自上而下，重新渲染一遍。<code>store</code> 里的数据更新后，触发当前组件重新渲染，然后又调用了 <code>dispatch</code> ，然后又更新 <code>store</code> ，然后又重新渲染… 结果就陷入更新死循环了。我想出的解决方案就是，把更新 <code>store</code> 的操作放在父组件里，效果果然不错。其中还涉及到几个 <em>hook</em> 的使用：<code>useEffect</code>、<code>useCallback</code> 和 <code>useMemo</code>。<code>useEffect</code> 用作在生命周期的挂载和卸载阶段使用，其他俩用作缓存函数计算值，可以有效提高超大耗时函数带来的性能问题。</p>
<p>最后一个难点是，解析词法的时候，如果文本过大会导致页面卡死。想出来的解决方案是，按 <em>1w</em> 个字符进行分段解析，解析文本内容长度与解析速度的关系大约是 <code>35:1</code>，也即每 <em>35</em> 个字符的解析时间大约需要 <em>1ms</em> 。然后用一个函数封装一个异步队列，每分析完一段后，延时 <em>200ms</em> 后再接着分析。速度快多了，而且页面不会卡死了，我真是一个小天才！嘿嘿 😁</p>
<p>最后的效果如下：</p>
<p><img src="/6d3a4b0222af/demo.gif" alt="demo"></p>
<p>对于 <em>React</em> 的看法：对于我这个初学者而言，还不算把 <em>React</em> 用到出神入化叭，但是能明显的感知到，如果你接触过组件式的开发，突然上手 <em>React</em> 是很容易的。而且没有像 <em>Vue</em> 里提供了过多的 <em>API</em> 需要记，基本都是一些和原生 <em>JS</em> 类型的语法，本质还是 <em>JS</em> 。之前总听说 <em>React</em> 的学习曲线比较陡峭，比 <em>Vue</em> 难些，但是在学完 <em>Vue</em> 后，再看 <em>React</em> ，会发现好多 <em>Vue</em> 的 “影子”。我觉得这些类似的库，不讨论借鉴与抄袭，对于开发者而言是很有利的。如果让你从 <em>Vue</em> 转到 <em>React</em> ，还是不难的。后续可以再学习些 <em>React</em> 底层原理相关的知识，争取也能把 <em>React</em> 整个渲染机制摸透，这样简历里又能多写一项技术栈了，哦耶 ✌️。</p>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><a class="button is-default" href="/835ff34dd8d8.html" title="竞态函数过期"><i class="iconfont icon-prev mr-2 has-text-grey"></i><span class="has-text-weight-semibold">上一页: 竞态函数过期</span></a><a class="button is-default" href="/48a22582094f.html" title="Babel 插件：自定义转换 JSX 语法规则"><span class="has-text-weight-semibold">下一页: Babel 插件：自定义转换 JSX 语法规则</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section><article class="mt-6 comment-container"><script async repo="showlotus/showlotus" src="https://utteranc.es/client.js" issue-term="pathname" theme="preferred-color-scheme"></script></article></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><!-- TODO 配置个人网站链接--><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/showlotus"><i class="iconfont icon-github"></i></a><!-- Gitee--><!-- Ins--><!-- RSS--><!-- 知乎--><!-- 领英--><!-- 脸书--></section><p><span>Copyright ©</span><span> showlotus 2026</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"></div><div><span></span></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/post.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@2.1.4/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js"></script><script src="/js/clipboard_use.js"></script><script src="/js/codepen.io.js"></script></body></html>